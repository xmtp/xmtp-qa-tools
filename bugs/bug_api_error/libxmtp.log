AM) }
2025-03-10T18:26:58.635218Z DEBUG xmtp_mls::groups: No queryable content fields, msg not formatted as encoded content
2025-03-10T18:26:58.635234Z DEBUG xmtp_mls::storage::encrypted_store: Transaction beginning
2025-03-10T18:26:58.635342Z DEBUG xmtp_mls::groups::intents: queued intent inbox_id="ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e" intent_kind=SendMessage
2025-03-10T18:26:58.635604Z DEBUG xmtp_mls::storage::encrypted_store: Transaction being committed
2025-03-10T18:26:58.636898Z DEBUG publish_intents:load_mls_group_with_lock_async: xmtp_mls::groups::mls_sync: [ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e] set stored intent [174] to state `published` inbox_id="ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e" installation_id=3625ecab12f5e27597c565338204c86e4c6058139b7a6bb75701220b263d84e8 intent.id=174 intent.kind=SendMessage group_id="ce0bb2459170232ce15fae8ac901abc5"
2025-03-10T18:26:58.636978Z DEBUG publish_intents:load_mls_group_with_lock_async:send_group_messages: xmtp_api::mls: sending [1] group messages inbox_id="ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a

 ❯ tests/groups.test.ts 5/10

 Test Files 0 passed (1)
      Tests 5 passed (10)
   Start at 15:26:47
   Duration 10.91s
2025-03-10T18:26:58.823351Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 310 }
2025-03-10T18:26:58.823445Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:26:58.823461Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:26:58.823521Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(131), flags: (0x4: END_HEADERS) }
2025-03-10T18:26:58.823574Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(131) }
2025-03-10T18:26:58.823603Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(131), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-10T18:26:58.832292Z DEBUG xmtp_mls::storage::encrypted_store: Transaction beginning
2025-03-10T18:26:58.832507Z DEBUG xmtp_mls::groups::intents: queued intent inbox_id="ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e" intent_kind=UpdateGroupMembership
2025-03-10T18:26:58.833375Z DEBUG xmtp_mls::storage::encrypted_store: Transaction being committed
2025-03-10T18:26:58.833702Z DEBUG xmtp_mls::subscriptions::stream_conversations: finished processing with group da14b1d682a82c6f85785b397594de74 group_id="da14b1d682a82c6f85785b397594de74"
2025-03-10T18:26:58.833710Z DEBUG xmtp_mls::subscriptions::stream_messages: begin establishing new message stream to include group_id=da14b1d682a82c6f85785b397594de74 inbox_id="ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e" installation_id=3625ecab12f5e27597c565338204c86e4c6058139b7a6bb75701220b263d84e8 group_id="da14b1d682a82c6f85785b397594de74"
2025-03-10T18:26:58.833930Z DEBUG xmtp_api::mls: subscribing to group messages inbox_id="ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e"
2025-03-10T18:26:58.833967Z DEBUG tower::buffer::worker: service.ready=true processing request
2025-03-10T18:26:58.834063Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(135), flags: (0x4: END_HEADERS) }
2025-03-10T18:26:58.834101Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(135) }
2025-03-10T18:26:58.834141Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(135), flags: (0x1: END_STREAM) }
2025-03-10T18:26:58.834203Z  INFO sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async: xmtp_mls::groups::intents: old group membership: {"ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e": 0}
2025-03-10T18:26:58.834213Z  INFO sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async: xmtp_mls::groups::intents: updated group membership: {"46b028acff96f69f2ecbcaadac3f3f40daf364645b7d6cab78d9325a7df7c3dd": 54918, "ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e": 66353, "64772567ce8d586087be0e6d60b3ac7d05ff01f11963403da76e03ac5850b48c": 54915, "e073369cb83392c01116a17fef4a6150e07f108af91a61819ecbfcfac568002d": 54912, "16c37e46853733b22afad12b67807c2f6ade4b7f86248be4746ab6c40d793920": 54913, "c40633422d7fe018162dc3ddbdf1719640211d87fb751c7f87f316df6f32fea1": 54911, "2cc6e0a7140f9a1e8d4f0c7993e0a59c2c6cfba29b2b9038335d0cdb5b58d122": 54914, "ef831cb0e89f9cbd2590b9683eeec20110e9c80cb44ae60e4fc4d292c0516b3f": 54916, "8ddb7053231da3be8cb24d2974bf22d544466d473002c2c96d173dde4c02b5dd": 54917}
2025-03-10T18:26:58.834240Z  INFO sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async: xmtp_mls::identity_updates: Getting installation diff. Old: GroupMembership { members: {"ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e": 0}, failed_installations: [] }. New GroupMembership { members: {"46b028acff96f69f2ecbcaadac3f3f40daf364645b7d6cab78d9325a7df7c3dd": 54918, "ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e": 66353, "64772567ce8d586087be0e6d60b3ac7d05ff01f11963403da76e03ac5850b48c": 54915, "e073369cb83392c01116a17fef4a6150e07f108af91a61819ecbfcfac568002d": 54912, "16c37e46853733b22afad12b67807c2f6ade4b7f86248be4746ab6c40d793920": 54913, "c40633422d7fe018162dc3ddbdf1719640211d87fb751c7f87f316df6f32fea1": 54911, "2cc6e0a7140f9a1e8d4f0c7993e0a59c2c6cfba29b2b9038335d0cdb5b58d122": 54914, "ef831cb0e89f9cbd2590b9683eeec20110e9c80cb44ae60e4fc4d292c0516b3f": 54916, "8ddb7053231da3be8cb24d2974bf22d544466d473002c2c96d173dde4c02b5dd": 54917}, failed_installations: [] }
2025-03-10T18:26:58.834360Z DEBUG sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async: xmtp_mls::identity_updates: Computing diff for "46b028acff96f69f2ecbcaadac3f3f40daf364645b7d6cab78d9325a7df7c3dd" from None to Some(54918)
2025-03-10T18:26:58.834456Z DEBUG sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async: xmtp_mls::storage::encrypted_store::association_state: Loaded association state from cache: 46b028acff96f69f2ecbcaadac3f3f40daf364645b7d6cab78d9325a7df7c3dd 54918
2025-03-10T18:26:58.834464Z DEBUG sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async: xmtp_mls::identity_updates: Computing diff for "64772567ce8d586087be0e6d60b3ac7d05ff01f11963403da76e03ac5850b48c" from None to Some(54915)
2025-03-10T18:26:58.834489Z DEBUG sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async: xmtp_mls::storage::encrypted_store::association_state: Loaded association state from cache: 64772567ce8d586087be0e6d60b3ac7d05ff01f11963403da76e03ac5850b48c 54915
2025-03-10T18:26:58.834493Z DEBUG sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async: xmtp_mls::identity_updates: Computing diff for "e073369cb83392c01116a17fef4a6150e07f108af91a61819ecbfcfac568002d" from None to Some(54912)
2025-03-10T18:26:58.834514Z DEBUG sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async: xmtp_mls::storage::encrypted_store::association_state: Loaded association state from cache: e073369cb83392c01116a17fef4a6150e07f108af91a61819ecbfcfac568002d 54912
2025-03-10T18:26:58.834517Z DEBUG sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async: xmtp_mls::identity_updates: Computing diff for "16c37e46853733b22afad12b67807c2f6ade4b7f86248be4746ab6c40d793920" from None to Some(54913)
2025-03-10T18:26:58.834529Z DEBUG sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async: xmtp_mls::storage::encrypted_store::association_state: Loaded association state from cache: 16c37e46853733b22afad12b67807c2f6ade4b7f86248be4746ab6c40d793920 54913
2025-03-10T18:26:58.834533Z DEBUG sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async: xmtp_mls::identity_updates: Computing diff for "c40633422d7fe018162dc3ddbdf1719640211d87fb751c7f87f316df6f32fea1" from None to Some(54911)
2025-03-10T18:26:58.834544Z DEBUG sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async: xmtp_mls::storage::encrypted_store::association_state: Loaded association state from cache: c40633422d7fe018162dc3ddbdf1719640211d87fb751c7f87f316df6f32fea1 54911
2025-03-10T18:26:58.834546Z DEBUG sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async: xmtp_mls::identity_updates: Computing diff for "2cc6e0a7140f9a1e8d4f0c7993e0a59c2c6cfba29b2b9038335d0cdb5b58d122" from None to Some(54914)
2025-03-10T18:26:58.834557Z DEBUG sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async: xmtp_mls::storage::encrypted_store::association_state: Loaded association state from cache: 2cc6e0a7140f9a1e8d4f0c7993e0a59c2c6cfba29b2b9038335d0cdb5b58d122 54914
2025-03-10T18:26:58.834559Z DEBUG sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async: xmtp_mls::identity_updates: Computing diff for "ef831cb0e89f9cbd2590b9683eeec20110e9c80cb44ae60e4fc4d292c0516b3f" from None to Some(54916)
2025-03-10T18:26:58.834596Z DEBUG sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async: xmtp_mls::storage::encrypted_store::association_state: Loaded association state from cache: ef831cb0e89f9cbd2590b9683eeec20110e9c80cb44ae60e4fc4d292c0516b3f 54916
2025-03-10T18:26:58.834602Z DEBUG sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async: xmtp_mls::identity_updates: Computing diff for "8ddb7053231da3be8cb24d2974bf22d544466d473002c2c96d173dde4c02b5dd" from None to Some(54917)
2025-03-10T18:26:58.834616Z DEBUG sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async: xmtp_mls::storage::encrypted_store::association_state: Loaded association state from cache: 8ddb7053231da3be8cb24d2974bf22d544466d473002c2c96d173dde4c02b5dd 54917
2025-03-10T18:26:58.834621Z DEBUG sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async: xmtp_mls::identity_updates: Computing diff for "ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e" from None to Some(66353)
2025-03-10T18:26:58.834660Z DEBUG sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async: xmtp_mls::storage::encrypted_store::association_state: Loaded association state from cache: ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e 66353
2025-03-10T18:26:58.834669Z DEBUG sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async:fetch_key_packages: xmtp_api::mls: fetch key packages inbox_id="ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e"
2025-03-10T18:26:58.834683Z DEBUG sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async:fetch_key_packages: tower::buffer::worker: service.ready=true processing request
2025-03-10T18:26:58.834717Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(137), flags: (0x4: END_HEADERS) }
2025-03-10T18:26:58.834727Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(137) }
2025-03-10T18:26:58.834753Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(137), flags: (0x1: END_STREAM) }
2025-03-10T18:26:59.013792Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(133), flags: (0x4: END_HEADERS) }
2025-03-10T18:26:59.013873Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(133) }
2025-03-10T18:26:59.013891Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(133), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-10T18:26:59.014015Z  INFO publish_intents:load_mls_group_with_lock_async: xmtp_mls::groups::mls_sync: [ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e] published intent [174] of type [SendMessage] intent.id=174 intent.kind=SendMessage inbox_id="ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e" installation_id=3625ecab12f5e27597c565338204c86e4c6058139b7a6bb75701220b263d84e8 group_id="ce0bb2459170232ce15fae8ac901abc5"
2025-03-10T18:26:59.189404Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 1140 }
2025-03-10T18:26:59.189494Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:26:59.189509Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:26:59.189561Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(135), flags: (0x4: END_HEADERS) }
2025-03-10T18:26:59.189607Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(137), flags: (0x4: END_HEADERS) }
2025-03-10T18:26:59.189648Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(137) }
2025-03-10T18:26:59.189671Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(137), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-10T18:26:59.189946Z DEBUG xmtp_mls::subscriptions::stream_messages: added group_id=da14b1d682a82c6f85785b397594de74 at cursor=1 to messages stream
2025-03-10T18:26:59.201717Z DEBUG sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async: xmtp_mls::groups::mls_sync: [ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e] set stored intent [175] to state `published` inbox_id="ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e" installation_id=3625ecab12f5e27597c565338204c86e4c6058139b7a6bb75701220b263d84e8 intent.id=175 intent.kind=UpdateGroupMembership group_id="da14b1d682a82c6f85785b397594de74"
2025-03-10T18:26:59.201888Z DEBUG sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async:send_group_messages: xmtp_api::mls: sending [1] group messages inbox_id="ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e"
2025-03-10T18:26:59.201933Z DEBUG sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async:send_group_messages: tower::buffer::worker: service.ready=true processing request
2025-03-10T18:26:59.201973Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(139), flags: (0x4: END_HEADERS) }
2025-03-10T18:26:59.201986Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Reset { stream_id: StreamId(87), error_code: CANCEL }
2025-03-10T18:26:59.202062Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(139) }
2025-03-10T18:26:59.202086Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(139), flags: (0x1: END_STREAM) }
2025-03-10T18:26:59.387261Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 5359 }
2025-03-10T18:26:59.387359Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:26:59.387376Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:26:59.413192Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(139), flags: (0x4: END_HEADERS) }
2025-03-10T18:26:59.413238Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(139) }
2025-03-10T18:26:59.413250Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(139), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-10T18:26:59.413300Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(135) }
2025-03-10T18:26:59.413381Z DEBUG process: xmtp_mls::subscriptions::stream_messages: [ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e]  is about to process streamed envelope for group 0xda14...de74 cursor_id=[337987] inbox_id="ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e" group_id="da14b1d682a82c6f85785b397594de74" cursor_id=337987
2025-03-10T18:26:59.413476Z  INFO sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async: xmtp_mls::groups::mls_sync: [ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e] published intent [175] of type [UpdateGroupMembership] intent.id=175 intent.kind=UpdateGroupMembership inbox_id="ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e" installation_id=3625ecab12f5e27597c565338204c86e4c6058139b7a6bb75701220b263d84e8 group_id="da14b1d682a82c6f85785b397594de74"
2025-03-10T18:26:59.413579Z  INFO sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async: xmtp_mls::groups::mls_sync: Commit sent. Stopping further publishes for this round
2025-03-10T18:26:59.413717Z DEBUG sync_until_intent_resolved:sync_with_conn:receive:query_group_messages{id_cursor=Some(0) group_id="da14b1d682a82c6f85785b397594de74"}: xmtp_api::mls: query group messages group_id="da14b1d682a82c6f85785b397594de74" id_cursor=0 inbox_id="ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e"
2025-03-10T18:26:59.413753Z DEBUG sync_until_intent_resolved:sync_with_conn:receive:query_group_messages{id_cursor=Some(0) group_id="da14b1d682a82c6f85785b397594de74"}: tower::buffer::worker: service.ready=true processing request
2025-03-10T18:26:59.413808Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(141), flags: (0x4: END_HEADERS) }
2025-03-10T18:26:59.413968Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(141) }
2025-03-10T18:26:59.413976Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(141), flags: (0x1: END_STREAM) }
2025-03-10T18:26:59.414228Z DEBUG process: xmtp_mls::subscriptions::stream_messages: epoch=0 for [ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e] in process_stream_entry() inbox_id="ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e" group_id="da14b1d682a82c6f85785b397594de74" cursor_id=337987 epoch=0
2025-03-10T18:26:59.414251Z  INFO process: xmtp_mls::subscriptions::stream_messages: error is not retryable. ReceiveGroup(EpochIncrementNotAllowed):processing group message in stream: epoch increment not allowed
2025-03-10T18:26:59.414257Z  WARN process: xmtp_mls::subscriptions::stream_messages: error processing streamed message epoch increment not allowed
2025-03-10T18:26:59.414512Z DEBUG process: xmtp_mls::subscriptions::stream_messages: attempting recovery sync for group 0xda14...de74 in epoch 0 inbox_id="ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e" group_id="da14b1d682a82c6f85785b397594de74" cursor_id=337987 epoch=0
2025-03-10T18:26:59.414886Z DEBUG process:sync_with_conn:receive:query_group_messages{id_cursor=Some(0) group_id="da14b1d682a82c6f85785b397594de74"}: xmtp_api::mls: query group messages group_id="da14b1d682a82c6f85785b397594de74" id_cursor=0 inbox_id="ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e"

 ❯ tests/groups.test.ts 5/10

 Test Files 0 passed (1)
      Tests 5 passed (10)
   Start at 15:26:47
   Duration 11.92s
2025-03-10T18:26:59.786376Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 29 }
2025-03-10T18:26:59.786483Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:26:59.786501Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:26:59.786593Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(141), flags: (0x4: END_HEADERS) }
2025-03-10T18:26:59.786646Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(141) }
2025-03-10T18:26:59.786675Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(141), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-10T18:26:59.786869Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(143), flags: (0x4: END_HEADERS) }
2025-03-10T18:26:59.786908Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(143) }
2025-03-10T18:26:59.786924Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(143), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-10T18:26:59.788431Z  INFO sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}: xmtp_mls::groups::mls_sync: Processing envelope with hash a1bae88cdfb1bee2a9da7a5deb621638205052502f45043ee58594da3531e0fa, id = 337987 inbox_id="ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e" installation_id=3625ecab12f5e27597c565338204c86e4c6058139b7a6bb75701220b263d84e8 group_id="da14b1d682a82c6f85785b397594de74" cursor=337987
2025-03-10T18:26:59.788461Z  INFO sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}: xmtp_mls::groups::mls_sync: client [ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e] is about to process own envelope [337987] for intent [175] inbox_id="ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e" installation_id=3625ecab12f5e27597c565338204c86e4c6058139b7a6bb75701220b263d84e8 group_id="da14b1d682a82c6f85785b397594de74" cursor=337987 intent_id=175 intent.kind=UpdateGroupMembership
2025-03-10T18:26:59.788762Z  INFO process:sync_with_conn:receive:process_message{allow_epoch_increment=true}: xmtp_mls::groups::mls_sync: Processing envelope with hash a1bae88cdfb1bee2a9da7a5deb621638205052502f45043ee58594da3531e0fa, id = 337987 inbox_id="ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e" installation_id=3625ecab12f5e27597c565338204c86e4c6058139b7a6bb75701220b263d84e8 group_id="da14b1d682a82c6f85785b397594de74" cursor=337987
2025-03-10T18:26:59.789389Z  INFO process:sync_with_conn:receive:process_message{allow_epoch_increment=true}: xmtp_mls::groups::mls_sync: client [ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e] is about to process own envelope [337987] for intent [175] inbox_id="ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e" installation_id=3625ecab12f5e27597c565338204c86e4c6058139b7a6bb75701220b263d84e8 group_id="da14b1d682a82c6f85785b397594de74" cursor=337987 intent_id=175 intent.kind=UpdateGroupMembership
2025-03-10T18:26:59.789930Z  INFO sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::groups::mls_sync: [ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e] Validating commit for intent 175. Message timestamp: 1741631219578142000
2025-03-10T18:26:59.790051Z  INFO sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::groups::validated_commit: Group context extensions proposal found: GroupMembership { members: {"e073369cb83392c01116a17fef4a6150e07f108af91a61819ecbfcfac568002d": 54912, "16c37e46853733b22afad12b67807c2f6ade4b7f86248be4746ab6c40d793920": 54913, "46b028acff96f69f2ecbcaadac3f3f40daf364645b7d6cab78d9325a7df7c3dd": 54918, "c40633422d7fe018162dc3ddbdf1719640211d87fb751c7f87f316df6f32fea1": 54911, "ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e": 66353, "64772567ce8d586087be0e6d60b3ac7d05ff01f11963403da76e03ac5850b48c": 54915, "2cc6e0a7140f9a1e8d4f0c7993e0a59c2c6cfba29b2b9038335d0cdb5b58d122": 54914, "ef831cb0e89f9cbd2590b9683eeec20110e9c80cb44ae60e4fc4d292c0516b3f": 54916, "8ddb7053231da3be8cb24d2974bf22d544466d473002c2c96d173dde4c02b5dd": 54917}, failed_installations: [] }
2025-03-10T18:26:59.790078Z  INFO sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::identity_updates: Getting installation diff. Old: GroupMembership { members: {"ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e": 0}, failed_installations: [] }. New GroupMembership { members: {"e073369cb83392c01116a17fef4a6150e07f108af91a61819ecbfcfac568002d": 54912, "16c37e46853733b22afad12b67807c2f6ade4b7f86248be4746ab6c40d793920": 54913, "46b028acff96f69f2ecbcaadac3f3f40daf364645b7d6cab78d9325a7df7c3dd": 54918, "c40633422d7fe018162dc3ddbdf1719640211d87fb751c7f87f316df6f32fea1": 54911, "ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e": 66353, "64772567ce8d586087be0e6d60b3ac7d05ff01f11963403da76e03ac5850b48c": 54915, "2cc6e0a7140f9a1e8d4f0c7993e0a59c2c6cfba29b2b9038335d0cdb5b58d122": 54914, "ef831cb0e89f9cbd2590b9683eeec20110e9c80cb44ae60e4fc4d292c0516b3f": 54916, "8ddb7053231da3be8cb24d2974bf22d544466d473002c2c96d173dde4c02b5dd": 54917}, failed_installations: [] }
2025-03-10T18:26:59.790370Z DEBUG sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::identity_updates: Computing diff for "e073369cb83392c01116a17fef4a6150e07f108af91a61819ecbfcfac568002d" from None to Some(54912)
2025-03-10T18:26:59.790530Z DEBUG sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::storage::encrypted_store::association_state: Loaded association state from cache: e073369cb83392c01116a17fef4a6150e07f108af91a61819ecbfcfac568002d 54912
2025-03-10T18:26:59.790540Z DEBUG sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::identity_updates: Computing diff for "16c37e46853733b22afad12b67807c2f6ade4b7f86248be4746ab6c40d793920" from None to Some(54913)
2025-03-10T18:26:59.790555Z DEBUG sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::storage::encrypted_store::association_state: Loaded association state from cache: 16c37e46853733b22afad12b67807c2f6ade4b7f86248be4746ab6c40d793920 54913
2025-03-10T18:26:59.790558Z DEBUG sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::identity_updates: Computing diff for "46b028acff96f69f2ecbcaadac3f3f40daf364645b7d6cab78d9325a7df7c3dd" from None to Some(54918)
2025-03-10T18:26:59.790640Z DEBUG sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::storage::encrypted_store::association_state: Loaded association state from cache: 46b028acff96f69f2ecbcaadac3f3f40daf364645b7d6cab78d9325a7df7c3dd 54918
2025-03-10T18:26:59.790648Z DEBUG sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::identity_updates: Computing diff for "c40633422d7fe018162dc3ddbdf1719640211d87fb751c7f87f316df6f32fea1" from None to Some(54911)
2025-03-10T18:26:59.790663Z DEBUG sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::storage::encrypted_store::association_state: Loaded association state from cache: c40633422d7fe018162dc3ddbdf1719640211d87fb751c7f87f316df6f32fea1 54911
2025-03-10T18:26:59.790668Z DEBUG sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::identity_updates: Computing diff for "64772567ce8d586087be0e6d60b3ac7d05ff01f11963403da76e03ac5850b48c" from None to Some(54915)
2025-03-10T18:26:59.790680Z DEBUG sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::storage::encrypted_store::association_state: Loaded association state from cache: 64772567ce8d586087be0e6d60b3ac7d05ff01f11963403da76e03ac5850b48c 54915
2025-03-10T18:26:59.790683Z DEBUG sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::identity_updates: Computing diff for "2cc6e0a7140f9a1e8d4f0c7993e0a59c2c6cfba29b2b9038335d0cdb5b58d122" from None to Some(54914)
2025-03-10T18:26:59.790694Z DEBUG sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::storage::encrypted_store::association_state: Loaded association state from cache: 2cc6e0a7140f9a1e8d4f0c7993e0a59c2c6cfba29b2b9038335d0cdb5b58d122 54914
2025-03-10T18:26:59.790698Z DEBUG sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::identity_updates: Computing diff for "ef831cb0e89f9cbd2590b9683eeec20110e9c80cb44ae60e4fc4d292c0516b3f" from None to Some(54916)
2025-03-10T18:26:59.790711Z DEBUG sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::storage::encrypted_store::association_state: Loaded association state from cache: ef831cb0e89f9cbd2590b9683eeec20110e9c80cb44ae60e4fc4d292c0516b3f 54916
2025-03-10T18:26:59.790714Z DEBUG sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::identity_updates: Computing diff for "8ddb7053231da3be8cb24d2974bf22d544466d473002c2c96d173dde4c02b5dd" from None to Some(54917)
2025-03-10T18:26:59.790724Z DEBUG sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::storage::encrypted_store::association_state: Loaded association state from cache: 8ddb7053231da3be8cb24d2974bf22d544466d473002c2c96d173dde4c02b5dd 54917
2025-03-10T18:26:59.790728Z DEBUG sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::identity_updates: Computing diff for "ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e" from None to Some(66353)
2025-03-10T18:26:59.790762Z DEBUG sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::storage::encrypted_store::association_state: Loaded association state from cache: ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e 66353
2025-03-10T18:26:59.790783Z DEBUG sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::storage::encrypted_store::association_state: Loaded association state from cache: ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e 66353
2025-03-10T18:26:59.790799Z DEBUG sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::storage::encrypted_store: Transaction beginning
2025-03-10T18:26:59.790861Z DEBUG sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::groups::mls_sync: [ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e]-[da14b1d682a82c6f85785b397594de74] processing own message for intent 175 / UpdateGroupMembership, message_epoch: 0 inbox_id="ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e" installation_id=3625ecab12f5e27597c565338204c86e4c6058139b7a6bb75701220b263d84e8 group_id="da14b1d682a82c6f85785b397594de74" cursor=337987 intent.id=175 intent.kind=UpdateGroupMembership
2025-03-10T18:26:59.790868Z  INFO sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::groups::mls_sync: [ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e] merging pending commit for intent 175
2025-03-10T18:26:59.791049Z  INFO sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::groups::mls_sync: [ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e]: Storing a transcript message with 8 members added and 0 members removed and 0 metadata changes
2025-03-10T18:26:59.792265Z DEBUG sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::storage::encrypted_store: Transaction being committed
2025-03-10T18:26:59.792290Z  INFO sync_until_intent_resolved:sync_with_conn:receive: xmtp_mls::groups::mls_sync: Transaction completed successfully: process for group [da14b1d682a82c6f85785b397594de74] envelope cursor[337987]
2025-03-10T18:26:59.792424Z DEBUG sync_until_intent_resolved:sync_with_conn:post_commit: xmtp_mls::groups::mls_sync: taking post commit action inbox_id="ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e" installation_id=3625ecab12f5e27597c565338204c86e4c6058139b7a6bb75701220b263d84e8 intent.id=175 intent.kind=UpdateGroupMembership
2025-03-10T18:26:59.793385Z DEBUG sync_until_intent_resolved:sync_with_conn:post_commit: xmtp_mls::groups::mls_sync: total welcome message proto bytes=5698
2025-03-10T18:26:59.793388Z DEBUG sync_until_intent_resolved:sync_with_conn:post_commit: xmtp_mls::groups::mls_sync: welcome chunk_size=8281
2025-03-10T18:26:59.793391Z DEBUG sync_until_intent_resolved:sync_with_conn:post_commit:send_welcome_messages: xmtp_api::mls: send welcome messages inbox_id="ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e"
2025-03-10T18:26:59.793415Z DEBUG sync_until_intent_resolved:sync_with_conn:post_commit:send_welcome_messages: tower::buffer::worker: service.ready=true processing request
2025-03-10T18:26:59.793473Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(145), flags: (0x4: END_HEADERS) }
2025-03-10T18:26:59.793488Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(145) }
2025-03-10T18:26:59.793533Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(145) }
2025-03-10T18:26:59.793559Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(145) }
2025-03-10T18:26:59.793570Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(145), flags: (0x1: END_STREAM) }
2025-03-10T18:26:59.793678Z  WARN process:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::groups::mls_sync: Intent for msg = [337987] was published in epoch 0 but group is currently in epoch 1 inbox_id="ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e" installation_id=3625ecab12f5e27597c565338204c86e4c6058139b7a6bb75701220b263d84e8 group_id="da14b1d682a82c6f85785b397594de74" cursor=337987 intent.id=175 intent.kind=UpdateGroupMembership
2025-03-10T18:26:59.793683Z DEBUG process:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::storage::encrypted_store: Transaction beginning
2025-03-10T18:26:59.793702Z DEBUG process:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::storage::encrypted_store: Transaction being rolled back
2025-03-10T18:26:59.793716Z  INFO process:sync_with_conn:receive: xmtp_mls::groups::mls_sync: Transaction failed: process for group [da14b1d682a82c6f85785b397594de74] envelope cursor [337987] error:[[337987] already processed]
2025-03-10T18:26:59.793736Z  INFO process:sync_with_conn:receive: xmtp_mls::groups::mls_sync: error is not retryable. ProcessIntent(AlreadyProcessed(337987)):[337987] already processed
2025-03-10T18:26:59.793741Z ERROR process:sync_with_conn:receive: xmtp_mls::groups::mls_sync: Message processing errors: [ProcessIntent(AlreadyProcessed(337987))] group_id="da14b1d682a82c6f85785b397594de74" inbox_id="ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e" installation_id="3625ecab12f5e27597c565338204c86e4c6058139b7a6bb75701220b263d84e8"
2025-03-10T18:26:59.793745Z ERROR process:sync_with_conn: xmtp_mls::groups::mls_sync: receive error ReceiveErrors([ProcessIntent(AlreadyProcessed(337987))]) error=Receive errors: [ProcessIntent(AlreadyProcessed(337987))]
2025-03-10T18:26:59.793855Z DEBUG process:sync_with_conn:post_commit: xmtp_mls::groups::mls_sync: taking post commit action inbox_id="ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e" installation_id=3625ecab12f5e27597c565338204c86e4c6058139b7a6bb75701220b263d84e8 intent.id=175 intent.kind=UpdateGroupMembership
2025-03-10T18:26:59.794806Z DEBUG process:sync_with_conn:post_commit: xmtp_mls::groups::mls_sync: total welcome message proto bytes=5698
2025-03-10T18:26:59.794810Z DEBUG process:sync_with_conn:post_commit: xmtp_mls::groups::mls_sync: welcome chunk_size=8281
2025-03-10T18:26:59.794812Z DEBUG process:sync_with_conn:post_commit:send_welcome_messages: xmtp_api::mls: send welcome messages inbox_id="ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e"
2025-03-10T18:26:59.794826Z DEBUG process:sync_with_conn:post_commit:send_welcome_messages: tower::buffer::worker: service.ready=true processing request
2025-03-10T18:26:59.794852Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(147), flags: (0x4: END_HEADERS) }
2025-03-10T18:26:59.794857Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(147) }
2025-03-10T18:26:59.794874Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(147) }
2025-03-10T18:26:59.980183Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 16413 }
2025-03-10T18:26:59.980275Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:26:59.980287Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:26:59.980613Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(145), size_increment: 16384 }
2025-03-10T18:26:59.980630Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 16384 }
2025-03-10T18:26:59.980637Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(145), size_increment: 16384 }
2025-03-10T18:26:59.980642Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 29309 }
2025-03-10T18:26:59.980646Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(147), size_increment: 16384 }
2025-03-10T18:26:59.980669Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(147) }
2025-03-10T18:26:59.980744Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(147) }
2025-03-10T18:26:59.980837Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(147), flags: (0x1: END_STREAM) }
2025-03-10T18:27:00.167972Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 65477 }
2025-03-10T18:27:00.168074Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Settings { flags: (0x0), initial_window_size: 131012 }
2025-03-10T18:27:00.168093Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Settings { flags: (0x1: ACK) }
2025-03-10T18:27:00.168139Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 19813 }
2025-03-10T18:27:00.168167Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:00.168237Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:00.368603Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(145), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:00.368716Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(145) }
2025-03-10T18:27:00.368761Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(145), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-10T18:27:00.375009Z  INFO sync: xmtp_mls::groups::mls_sync: [ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e] syncing group, epoch = 1 inbox_id="ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e" installation_id=3625ecab12f5e27597c565338204c86e4c6058139b7a6bb75701220b263d84e8 group_id="da14b1d682a82c6f85785b397594de74" epoch=1
2025-03-10T18:27:00.375189Z DEBUG sync:load_mls_group_with_lock_async: xmtp_mls::identity_updates: Fetching identity updates for: ["8ddb7053231da3be8cb24d2974bf22d544466d473002c2c96d173dde4c02b5dd", "16c37e46853733b22afad12b67807c2f6ade4b7f86248be4746ab6c40d793920", "c40633422d7fe018162dc3ddbdf1719640211d87fb751c7f87f316df6f32fea1", "ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e", "ef831cb0e89f9cbd2590b9683eeec20110e9c80cb44ae60e4fc4d292c0516b3f", "46b028acff96f69f2ecbcaadac3f3f40daf364645b7d6cab78d9325a7df7c3dd", "64772567ce8d586087be0e6d60b3ac7d05ff01f11963403da76e03ac5850b48c", "2cc6e0a7140f9a1e8d4f0c7993e0a59c2c6cfba29b2b9038335d0cdb5b58d122", "e073369cb83392c01116a17fef4a6150e07f108af91a61819ecbfcfac568002d"]
2025-03-10T18:27:00.375396Z DEBUG sync:load_mls_group_with_lock_async:get_identity_updates_v2{filters=[GetIdentityUpdatesV2Filter { inbox_id: "8ddb7053231da3be8cb24d2974bf22d544466d473002c2c96d173dde4c02b5dd", sequence_id: Some(54917) }, GetIdentityUpdatesV2Filter { inbox_id: "16c37e46853733b22afad12b67807c2f6ade4b7f86248be4746ab6c40d793920", sequence_id: Some(54913) }, GetIdentityUpdatesV2Filter { inbox_id: "c40633422d7fe018162dc3ddbdf1719640211d87fb751c7f87f316df6f32fea1", sequence_id: Some(54911) }, GetIdentityUpdatesV2Filter { inbox_id: "ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e", sequence_id: Some(66353) }, GetIdentityUpdatesV2Filter { inbox_id: "ef831cb0e89f9cbd2590b9683eeec20110e9c80cb44ae60e4fc4d292c0516b3f", sequence_id: Some(54916) }, GetIdentityUpdatesV2Filter { inbox_id: "46b028acff96f69f2ecbcaadac3f3f40daf364645b7d6cab78d9325a7df7c3dd", sequence_id: Some(54918) }, GetIdentityUpdatesV2Filter { inbox_id: "64772567ce8d586087be0e6d60b3ac7d05ff01f11963403da76e03ac5850b48c", sequence_id: So
stdout | tests/groups.test.ts > ts_groups > createGroup-8: should create a large group of 8 participants 8
[2025-03-10T18:27:00.372Z] [warn] ts_groups > createGroup-8: should create a large group of 8 participants 8 2.135s


 ❯ tests/groups.test.ts 6/10

 Test Files 0 passed (1)
      Tests 6 passed (10)
   Start at 15:26:47
   Duration 12.63s
2025-03-10T18:27:00.425030Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(147), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:00.425060Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(147) }
2025-03-10T18:27:00.425065Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(147), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-10T18:27:00.564452Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 10149 }
2025-03-10T18:27:00.564535Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:00.564546Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:00.581270Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(149), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:00.581319Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(149) }
2025-03-10T18:27:00.581327Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(149), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-10T18:27:00.581576Z  INFO sync:load_mls_group_with_lock_async: xmtp_mls::identity_updates: Getting installation diff. Old: GroupMembership { members: {"46b028acff96f69f2ecbcaadac3f3f40daf364645b7d6cab78d9325a7df7c3dd": 54918, "ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e": 66353, "e073369cb83392c01116a17fef4a6150e07f108af91a61819ecbfcfac568002d": 54912, "2cc6e0a7140f9a1e8d4f0c7993e0a59c2c6cfba29b2b9038335d0cdb5b58d122": 54914, "64772567ce8d586087be0e6d60b3ac7d05ff01f11963403da76e03ac5850b48c": 54915, "8ddb7053231da3be8cb24d2974bf22d544466d473002c2c96d173dde4c02b5dd": 54917, "ef831cb0e89f9cbd2590b9683eeec20110e9c80cb44ae60e4fc4d292c0516b3f": 54916, "c40633422d7fe018162dc3ddbdf1719640211d87fb751c7f87f316df6f32fea1": 54911, "16c37e46853733b22afad12b67807c2f6ade4b7f86248be4746ab6c40d793920": 54913}, failed_installations: [] }. New GroupMembership { members: {"46b028acff96f69f2ecbcaadac3f3f40daf364645b7d6cab78d9325a7df7c3dd": 54918, "ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e": 66353, "e073369cb83392c01116a17fef4a6150e07f108af91a61819ecbfcfac568002d": 54912, "2cc6e0a7140f9a1e8d4f0c7993e0a59c2c6cfba29b2b9038335d0cdb5b58d122": 54914, "64772567ce8d586087be0e6d60b3ac7d05ff01f11963403da76e03ac5850b48c": 54915, "8ddb7053231da3be8cb24d2974bf22d544466d473002c2c96d173dde4c02b5dd": 54917, "ef831cb0e89f9cbd2590b9683eeec20110e9c80cb44ae60e4fc4d292c0516b3f": 54916, "c40633422d7fe018162dc3ddbdf1719640211d87fb751c7f87f316df6f32fea1": 54911, "16c37e46853733b22afad12b67807c2f6ade4b7f86248be4746ab6c40d793920": 54913}, failed_installations: [] }
2025-03-10T18:27:00.582854Z DEBUG process: xmtp_mls::subscriptions::stream_messages: recovery sync triggered by streamed message successful. epoch = 1 for group = da14b1d682a82c6f85785b397594de74 inbox_id="ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e" group_id="da14b1d682a82c6f85785b397594de74" cursor_id=337987
2025-03-10T18:27:00.582986Z DEBUG process: xmtp_mls::subscriptions::stream_messages: [ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e] processed stream envelope [337987]
2025-03-10T18:27:00.583281Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337987) group_id="da14b1d682a82c6f85785b397594de74"}: xmtp_api::mls: query group messages group_id="da14b1d682a82c6f85785b397594de74" id_cursor=337987 inbox_id="ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e"

 ❯ tests/groups.test.ts 6/10

 Test Files 0 passed (1)
      Tests 6 passed (10)
   Start at 15:26:47
   Duration 12.93s
2025-03-10T18:27:00.970443Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 33 }
2025-03-10T18:27:00.970548Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:00.970566Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:00.970608Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(151), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:00.970645Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(151) }
2025-03-10T18:27:00.971182Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(151), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-10T18:27:00.978619Z DEBUG xmtp_mls::storage::encrypted_store: Transaction beginning
2025-03-10T18:27:00.978695Z DEBUG xmtp_mls::groups::intents: queued intent inbox_id="ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e" intent_kind=MetadataUpdate
2025-03-10T18:27:00.979425Z DEBUG xmtp_mls::storage::encrypted_store: Transaction being committed
2025-03-10T18:27:00.983338Z DEBUG sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async: xmtp_mls::groups::mls_sync: [ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e] set stored intent [176] to state `published` inbox_id="ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e" installation_id=3625ecab12f5e27597c565338204c86e4c6058139b7a6bb75701220b263d84e8 intent.id=176 intent.kind=MetadataUpdate group_id="da14b1d682a82c6f85785b397594de74"
2025-03-10T18:27:00.983420Z DEBUG sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async:send_group_messages: xmtp_api::mls: sending [1] group messages inbox_id="ffefef1beb9
stdout | tests/groups.test.ts > ts_groups > syncGroup-8: should sync a large group of 8 participants 8
[2025-03-10T18:27:00.976Z] [warn] ts_groups > syncGroup-8: should sync a large group of 8 participants 8 601.5ms


 ❯ tests/groups.test.ts 7/10

 Test Files 0 passed (1)
      Tests 7 passed (10)
   Start at 15:26:47
   Duration 13.23s
2025-03-10T18:27:01.168708Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 2347 }
2025-03-10T18:27:01.168792Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:01.168805Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:01.182266Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(153), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:01.182302Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(153) }
2025-03-10T18:27:01.182310Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(153), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-10T18:27:01.182314Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(135) }
2025-03-10T18:27:01.182385Z  INFO sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async: xmtp_mls::groups::mls_sync: [ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e] published intent [176] of type [MetadataUpdate] intent.id=176 intent.kind=MetadataUpdate inbox_id="ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e" installation_id=3625ecab12f5e27597c565338204c86e4c6058139b7a6bb75701220b263d84e8 group_id="da14b1d682a82c6f85785b397594de74"
2025-03-10T18:27:01.182397Z  INFO sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async: xmtp_mls::groups::mls_sync: Commit sent. Stopping further publishes for this round
2025-03-10T18:27:01.182400Z DEBUG process: xmtp_mls::subscriptions::stream_messages: [ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e]  is about to process streamed envelope for group 0xda14...de74 cursor_id=[337988] inbox_id="ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e" group_id="da14b1d682a82c6f85785b397594de74" cursor_id=337988
2025-03-10T18:27:01.182538Z DEBUG sync_until_intent_resolved:sync_with_conn:receive:query_group_messages{id_cursor=Some(337987) group_id="da14b1d682a82c6f85785b397594de74"}: xmtp_api::mls: query group messages group_id="da14b1d682a82c6f85785b397594de74" id_cursor=337987 inbox_id="ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e"
2025-03-10T18:27:01.182602Z DEBUG sync_until_intent_resolved:sync_with_conn:receive:query_group_messages{id_cursor=Some(337987) group_id="da14b1d682a82c6f85785b397594de74"}: tower::buffer::worker: service.ready=true processing request
2025-03-10T18:27:01.182640Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(155), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:01.182655Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(155) }
2025-03-10T18:27:01.182659Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(155), flags: (0x1: END_STREAM) }
2025-03-10T18:27:01.182964Z DEBUG process: xmtp_mls::subscriptions::stream_messages: epoch=1 for [ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e] in process_stream_entry() inbox_id="ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e" group_id="da14b1d682a82c6f85785b397594de74" cursor_id=337988 epoch=1
2025-03-10T18:27:01.182989Z  INFO process: xmtp_mls::subscriptions::stream_messages: error is not retryable. ReceiveGroup(EpochIncrementNotAllowed):processing group message in stream: epoch increment not allowed
2025-03-10T18:27:01.182993Z  WARN process: xmtp_mls::subscriptions::stream_messages: error processing streamed message epoch increment not allowed
2025-03-10T18:27:01.183099Z DEBUG process: xmtp_mls::subscriptions::stream_messages: attempting recovery sync for group 0xda14...de74 in epoch 1 inbox_id="ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e" group_id="da14b1d682a82c6f85785b397594de74" cursor_id=337988 epoch=1
2025-03-10T18:27:01.183267Z DEBUG process:sync_with_conn:receive:query_group_messages{id_cursor=Some(337987) group_id="da14b1d682a82c6f85785b397594de74"}: xmtp_api::mls: query group messages group_id="da14b1d682a82c6f85785b397594de74" id_cursor=337987 inbox_id="ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e"

 ❯ tests/groups.test.ts 7/10

 Test Files 0 passed (1)
      Tests 7 passed (10)
   Start at 15:26:47
   Duration 13.94s
2025-03-10T18:27:01.805672Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 33 }
2025-03-10T18:27:01.805700Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:01.805704Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:01.805711Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(157), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:01.805718Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(157) }
2025-03-10T18:27:01.805774Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(157), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-10T18:27:01.805993Z  INFO process:sync_with_conn:receive:process_message{allow_epoch_increment=true}: xmtp_mls::groups::mls_sync: Processing envelope with hash babffb16216958ec3aa2ff0f029aa914c575ed24bb29ba7e2c863f623c66859e, id = 337988 inbox_id="ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e" installation_id=3625ecab12f5e27597c565338204c86e4c6058139b7a6bb75701220b263d84e8 group_id="da14b1d682a82c6f85785b397594de74" cursor=337988
2025-03-10T18:27:01.806004Z  INFO process:sync_with_conn:receive:process_message{allow_epoch_increment=true}: xmtp_mls::groups::mls_sync: client [ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e] is about to process own envelope [337988] for intent [176] inbox_id="ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e" installation_id=3625ecab12f5e27597c565338204c86e4c6058139b7a6bb75701220b263d84e8 group_id="da14b1d682a82c6f85785b397594de74" cursor=337988 intent_id=176 intent.kind=MetadataUpdate
2025-03-10T18:27:01.806210Z  INFO process:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::groups::mls_sync: [ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e] Validating commit for intent 176. Message timestamp: 1741631221360490000
2025-03-10T18:27:01.806252Z  INFO process:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::groups::validated_commit: Group context extensions proposal found: GroupMembership { members: {"ef831cb0e89f9cbd2590b9683eeec20110e9c80cb44ae60e4fc4d292c0516b3f": 54916, "46b028acff96f69f2ecbcaadac3f3f40daf364645b7d6cab78d9325a7df7c3dd": 54918, "2cc6e0a7140f9a1e8d4f0c7993e0a59c2c6cfba29b2b9038335d0cdb5b58d122": 54914, "c40633422d7fe018162dc3ddbdf1719640211d87fb751c7f87f316df6f32fea1": 54911, "8ddb7053231da3be8cb24d2974bf22d544466d473002c2c96d173dde4c02b5dd": 54917, "64772567ce8d586087be0e6d60b3ac7d05ff01f11963403da76e03ac5850b48c": 54915, "16c37e46853733b22afad12b67807c2f6ade4b7f86248be4746ab6c40d793920": 54913, "e073369cb83392c01116a17fef4a6150e07f108af91a61819ecbfcfac568002d": 54912, "ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e": 66353}, failed_installations: [] }
2025-03-10T18:27:01.806259Z  INFO process:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::identity_updates: Getting installation diff. Old: GroupMembership { members: {"8ddb7053231da3be8cb24d2974bf22d544466d473002c2c96d173dde4c02b5dd": 54917, "ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e": 66353, "2cc6e0a7140f9a1e8d4f0c7993e0a59c2c6cfba29b2b9038335d0cdb5b58d122": 54914, "e073369cb83392c01116a17fef4a6150e07f108af91a61819ecbfcfac568002d": 54912, "64772567ce8d586087be0e6d60b3ac7d05ff01f11963403da76e03ac5850b48c": 54915, "16c37e46853733b22afad12b67807c2f6ade4b7f86248be4746ab6c40d793920": 54913, "46b028acff96f69f2ecbcaadac3f3f40daf364645b7d6cab78d9325a7df7c3dd": 54918, "c40633422d7fe018162dc3ddbdf1719640211d87fb751c7f87f316df6f32fea1": 54911, "ef831cb0e89f9cbd2590b9683eeec20110e9c80cb44ae60e4fc4d292c0516b3f": 54916}, failed_installations: [] }. New GroupMembership { members: {"ef831cb0e89f9cbd2590b9683eeec20110e9c80cb44ae60e4fc4d292c0516b3f": 54916, "46b028acff96f69f2ecbcaadac3f3f40daf364645b7d6cab78d9325a7df7c3dd": 54918, "2cc6e0a7140f9a1e8d4f0c7993e0a59c2c6cfba29b2b9038335d0cdb5b58d122": 54914, "c40633422d7fe018162dc3ddbdf1719640211d87fb751c7f87f316df6f32fea1": 54911, "8ddb7053231da3be8cb24d2974bf22d544466d473002c2c96d173dde4c02b5dd": 54917, "64772567ce8d586087be0e6d60b3ac7d05ff01f11963403da76e03ac5850b48c": 54915, "16c37e46853733b22afad12b67807c2f6ade4b7f86248be4746ab6c40d793920": 54913, "e073369cb83392c01116a17fef4a6150e07f108af91a61819ecbfcfac568002d": 54912, "ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e": 66353}, failed_installations: [] }
2025-03-10T18:27:01.806482Z DEBUG process:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::storage::encrypted_store::association_state: Loaded association state from cache: ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e 66353
2025-03-10T18:27:01.806496Z DEBUG process:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::storage::encrypted_store: Transaction beginning
2025-03-10T18:27:01.806530Z DEBUG process:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::groups::mls_sync: [ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e]-[da14b1d682a82c6f85785b397594de74] processing own message for intent 176 / MetadataUpdate, message_epoch: 1 inbox_id="ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e" installation_id=3625ecab12f5e27597c565338204c86e4c6058139b7a6bb75701220b263d84e8 group_id="da14b1d682a82c6f85785b397594de74" cursor=337988 intent.id=176 intent.kind=MetadataUpdate
2025-03-10T18:27:01.806535Z  INFO process:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::groups::mls_sync: [ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e] merging pending commit for intent 176
2025-03-10T18:27:01.806686Z  INFO process:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::groups::mls_sync: [ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e]: Storing a transcript message with 0 members added and 0 members removed and 1 metadata changes
2025-03-10T18:27:01.807670Z DEBUG process:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::storage::encrypted_store: Transaction being committed
2025-03-10T18:27:01.807694Z  INFO process:sync_with_conn:receive: xmtp_mls::groups::mls_sync: Transaction completed successfully: process for group [da14b1d682a82c6f85785b397594de74] envelope cursor[337988]
2025-03-10T18:27:01.808375Z DEBUG process: xmtp_mls::subscriptions::stream_messages: recovery sync triggered by streamed message successful. epoch = 2 for group = da14b1d682a82c6f85785b397594de74 inbox_id="ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e" group_id="da14b1d682a82c6f85785b397594de74" cursor_id=337988
2025-03-10T18:27:01.808428Z DEBUG process: xmtp_mls::subscriptions::stream_messages: [ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e] processed stream envelope [337988]
2025-03-10T18:27:01.812588Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(155), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:01.812606Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(155) }
2025-03-10T18:27:01.812611Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(155), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-10T18:27:01.812854Z  INFO sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}: xmtp_mls::groups::mls_sync: Processing envelope with hash babffb16216958ec3aa2ff0f029aa914c575ed24bb29ba7e2c863f623c66859e, id = 337988 inbox_id="ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e" installation_id=3625ecab12f5e27597c565338204c86e4c6058139b7a6bb75701220b263d84e8 group_id="da14b1d682a82c6f85785b397594de74" cursor=337988
2025-03-10T18:27:01.812869Z  INFO sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}: xmtp_mls::groups::mls_sync: client [ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e] is about to process external envelope [337988] inbox_id="ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e" installation_id=3625ecab12f5e27597c565338204c86e4c6058139b7a6bb75701220b263d84e8 group_id="da14b1d682a82c6f85785b397594de74" cursor=337988
2025-03-10T18:27:01.813134Z DEBUG sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::storage::encrypted_store: Transaction beginning
2025-03-10T18:27:01.813143Z DEBUG sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::storage::encrypted_store: Transaction being rolled back
2025-03-10T18:27:01.813157Z  INFO sync_until_intent_resolved:sync_with_conn:receive: xmtp_mls::groups::mls_sync: Transaction failed: process for group [da14b1d682a82c6f85785b397594de74] envelope cursor [337988] error:[openmls process message error: Message epoch differs from the group's epoch.]
2025-03-10T18:27:01.813162Z  INFO sync_until_intent_resolved:sync_with_conn:receive: xmtp_mls::groups::mls_sync: error is not retryable. OpenMlsProcessMessage(ValidationError(WrongEpoch)):openmls process message error: Message epoch differs from the group's epoch.
2025-03-10T18:27:01.813167Z ERROR sync_until_intent_resolved:sync_with_conn:receive: xmtp_mls::groups::mls_sync: Message processing errors: [OpenMlsProcessMessage(ValidationError(WrongEpoch))] group_id="da14b1d682a82c6f85785b397594de74" inbox_id="ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e" installation_id="3625ecab12f5e27597c565338204c86e4c6058139b7a6bb75701220b263d84e8"
2025-03-10T18:27:01.813187Z ERROR sync_until_intent_resolved:sync_with_conn: xmtp_mls::groups::mls_sync: receive error ReceiveErrors([OpenMlsProcessMessage(ValidationError(WrongEpoch))]) error=Receive errors: [OpenMlsProcessMessage(ValidationError(WrongEpoch))]
2025-03-10T18:27:01.813534Z  INFO sync: xmtp_mls::groups::mls_sync: [ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e] syncing group, epoch = 2 inbox_id="ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e" installation_id=3625ecab12f5e27597c565338204c86e4c6058139b7a6bb75701220b263d84e8 group_id="da14b1d682a82c6f85785b397594de74" epoch=2
2025-03-10T18:27:01.813727Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}: xmtp_api::mls: query group messages group_id="da14b1d682a82c6f85785b397594de74" id_cursor=337988 inbox_id="ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e"
2025-03-10T18:27:01.813742Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}: tower::buffer::worker: service.ready=true processing request
2025-03-10T18:27:01.813770Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(159), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:01.813785Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(159) }
2025-03-10T18:27:01.813789Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(159), flags: (0x1: END_STREAM) }
2025-03-10T18:27:02.428989Z DEBUG tonic::transport::channel::service::connection: connection task error: hyper::Error(Io, Custom { kind: BrokenPipe, error: "connection closed because of a broken pipe" })
2025-03-10T18:27:02.429078Z DEBUG tonic::codec::decode: decoder inner stream error: Status { code: Unknown, message: "h2 protocol error: error reading a body from connection", source: Some(hyper::Error(Body, Error { kind: Io(Custom { kind: BrokenPipe, error: "stream closed because of a broken pipe" }) })) }
2025-03-10T18:27:02.429147Z DEBUG xmtp_mls::subscriptions: `stream_all_messages` stream ended, dropping stream
2025-03-10T18:27:02.429170Z  WARN sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}: xmtp_api::mls: retrying function that failed with error=endpoint: query_group_messages, source: status: Unknown, message: "transport error", details: [], metadata: MetadataMap { headers: {} }
2025-03-10T18:27:02.428989Z DEBUG tonic::transport::channel::service::connection: connection task error: hyper::Error(Io, Custom { kind: BrokenPipe, error: "connection closed because of a broken pipe" })
2025-03-10T18:27:02.429407Z DEBUG tonic::transport::channel::service::connection: connection task error: hyper::Error(Io, Custom { kind: BrokenPipe, error: "connection closed because of a broken pipe" })
2025-03-10T18:27:02.429078Z DEBUG tonic::codec::decode: decoder inner stream error: Status { code: Unknown, message: "h2 protocol error: error reading a body from connection", source: Some(hyper::Error(Body, Error { kind: Io(Custom { kind: BrokenPipe, error: "stream closed because of a broken pipe" }) })) }
2025-03-10T18:27:02.429893Z DEBUG xmtp_mls::subscriptions: `stream_all_messages` stream ended, dropping stream
2025-03-10T18:27:02.429427Z DEBUG tonic::codec::decode: decoder inner stream error: Status { code: Unknown, message: "h2 protocol error: error reading a body from connection", source: Some(hyper::Error(Body, Error { kind: Io(Custom { kind: BrokenPipe, error: "stream closed because of a broken pipe" }) })) }
2025-03-10T18:27:02.430026Z DEBUG xmtp_mls::subscriptions: `stream_all_messages` stream ended, dropping stream
2025-03-10T18:27:02.430714Z DEBUG tonic::transport::channel::service::connection: connection task error: hyper::Error(Io, Custom { kind: BrokenPipe, error: "connection closed because of a broken pipe" })

 ❯ tests/groups.test.ts 7/10

 Test Files 0 passed (1)
      Tests 7 passed (10)
   Start at 15:26:47
   Duration 14.95s
2025-03-10T18:27:02.872194Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}: h2::client: binding client connection
2025-03-10T18:27:02.872268Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}: h2::client: client connection bound
2025-03-10T18:27:02.872285Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}: h2::codec::framed_write: send frame=Settings { flags: (0x0), enable_push: 0, initial_window_size: 2097152, max_frame_size: 16384, max_header_list_size: 16384 }
2025-03-10T18:27:02.872344Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}: tower::buffer::worker: service.ready=true processing request
2025-03-10T18:27:02.872411Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}:Connection{peer=Client}: h2::codec::framed_write: send f

 ❯ tests/groups.test.ts 7/10

 Test Files 0 passed (1)
      Tests 7 passed (10)
   Start at 15:26:47
   Duration 20.00s
2025-03-10T18:27:08.047305Z DEBUG tonic::transport::channel::service::connection: connection task error: hyper::Error(Io, Custom { kind: BrokenPipe, error: "connection closed because of a broken pipe" })
2025-03-10T18:27:08.047318Z  WARN sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}: xmtp_api::mls: retrying function that failed with error=endpoint: query_group_messages, source: status: Unknown, message: "transport error", details: [], metadata: MetadataMap { headers: {} }
2025-03-10T18:27:08.117080Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}: hyper_util::client::legacy::connect::http: connecting to 3.136.169.76:443
2025-03-10T18:27:08.117408Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}: hyper_util::client::legacy::connect::http: connected to 3.136.169.76:443
2025-03-10T18:27:08.466524Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}: h2::client: binding client connection
2025-03-10T18:27:08.466629Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}: h2::client: client connection bound
2025-03-10T18:27:08.466648Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}: h2::codec::framed_write: send frame=Settings { flags: (0x0), enable_push: 0, initial_window_size: 2097152, max_frame_size: 16384, max_header_list_size: 16384 }
2025-03-10T18:27:08.466741Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}: tower::buffer::worker: service.ready=true processing request
2025-03-10T18:27:08.466852Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}:Connection{peer=Client}: h2::codec::framed_write: send frame=WindowUpdate { stream_id: StreamId(0), size_increment: 2147418112 }
2025-03-10T18:27:08.467058Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(1), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:08.467123Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(1) }
2025-03-10T18:27:08.467142Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(1), flags: (0x1: END_STREAM) }
2025-03-10T18:27:08.657802Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Settings { flags: (0x0), max_frame_size: 16384 }
2025-03-10T18:27:08.657916Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Settings { flags: (0x1: ACK) }
2025-03-10T18:27:08.658028Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Settings { flags: (0x1: ACK) }
2025-03-10T18:27:08.658042Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}:Connection{peer=Client}: h2::proto::settings: received settings ACK; applying Settings { flags: (0x0), enable_push: 0, initial_window_size: 2097152, max_frame_size: 16384, max_header_list_size: 16384 }
2025-03-10T18:27:08.658094Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 33 }
2025-03-10T18:27:08.658120Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:08.658136Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:08.658190Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(1), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:08.658442Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(1) }
2025-03-10T18:27:08.658830Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(1), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-10T18:27:08.665138Z  INFO get_inbox_ids{account_addresses=["0x50ed71b315a26ae5cf91d844c557e167166b1025"] len=1}: xmtp_api::identity: Getting inbox_ids for account addresses: ["0x50ed71b315a26ae5cf91d844c557e167166b1025"]
stdout | tests/groups.test.ts > ts_groups > updateGroupName-8: should update the group name
[2025-03-10T18:27:08.661Z] [warn] ts_groups > updateGroupName-8: should update the group name 7.683s


 ❯ tests/groups.test.ts 8/10

 Test Files 0 passed (1)
      Tests 8 passed (10)
   Start at 15:26:47
   Duration 20.91s
2025-03-10T18:27:09.066770Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 51 }
2025-03-10T18:27:09.066952Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:09.066977Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:09.067013Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(3), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:09.067901Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(3) }
2025-03-10T18:27:09.067933Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(3), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-10T18:27:09.069156Z DEBUG load_mls_group_with_lock_async: xmtp_mls::identity_updates: Fetching identity updates for: ["16c37e46853733b22afad12b67807c2f6ade4b7f86248be4746ab6c40d793920", "e073369cb83392c01116a17fef4a6150e07f108af91a61819ecbfcfac568002d", "2cc6e0a7140f9a1e8d4f0c7993e0a59c2c6cfba29b2b9038335d0cdb5b58d122", "ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e", "ef831cb0e89f9cbd2590b9683eeec20110e9c80cb44ae60e4fc4d292c0516b3f", "64772567ce8d586087be0e6d60b3ac7d05ff01f11963403da76e03ac5850b48c", "8ddb7053231da3be8cb24d2974bf22d544466d473002c2c96d173dde4c02b5dd", "c40633422d7fe018162dc3ddbdf1719640211d87fb751c7f87f316df6f32fea1", "46b028acff96f69f2ecbcaadac3f3f40daf364645b7d6cab78d9325a7df7c3dd"]
2025-03-10T18:27:09.069870Z DEBUG load_mls_group_with_lock_async:get_identity_updates_v2{filters=[GetIdentityUpdatesV2Filter { inbox_id: "16c37e46853733b22afad12b67807c2f6ade4b7f86248be4746ab6c40d793920", sequence_id: Some(54913) }, GetIdentityUpdatesV2Filter { inbox_id: "e073369cb83392c01116a17fef4a6150e07f108af91a61819ecbfcfac568002d", sequence_id: Some(54912) }, GetIdentityUpdatesV2Filter { inbox_id: "2cc6e0a7140f9a1e8d4f0c7993e0a59c2c6cfba29b2b9038335d0cdb5b58d122", sequence_id: Some(54914) }, GetIdentityUpdatesV2Filter { inbox_id: "ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e", sequence_id: Some(66353) }, GetIdentityUpdatesV2Filter { inbox_id: "ef831cb0e89f9cbd2590b9683eeec20110e9c80cb44ae60e4fc4d292c0516b3f", sequence_id: Some(54916) }, GetIdentityUpdatesV2Filter { inbox_id: "64772567ce8d586087be0e6d60b3ac7d05ff01f11963403da76e03ac5850b48c", sequence_id: Some(54915) }, GetIdentityUpdatesV2Filter { inbox_id: "8ddb7053231da3be8cb24d2974bf22d544466d473002c2c96d173dde4c02b5dd", sequence_id: Some(54917) }, GetIdentityUpdatesV2Filter { inbox_id: "c40633422d7fe018162dc3ddbdf1719640211d87fb751c7f87f316df6f32fea1", sequence_id: Some(54911) }, GetIdentityUpdatesV2Filter { inbox_id: "46b028acff96f69f2ecbcaadac3f3f40daf364645b7d6cab78d9325a7df7c3dd", sequence_id: Some(54918) }] len=9}: tower::buffer::worker: service.ready=true processing request
2025-03-10T18:27:09.070131Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(5), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:09.070172Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(5) }
2025-03-10T18:27:09.070282Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(5), flags: (0x1: END_STREAM) }
2025-03-10T18:27:09.250656Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 653 }
2025-03-10T18:27:09.250728Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:09.250741Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:09.250759Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(5), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:09.251092Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(5) }
2025-03-10T18:27:09.251166Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(5), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-10T18:27:09.251504Z  INFO load_mls_group_with_lock_async: xmtp_mls::identity_updates: Getting installation diff. Old: GroupMembership { members: {"c40633422d7fe018162dc3ddbdf1719640211d87fb751c7f87f316df6f32fea1": 54911, "e073369cb83392c01116a17fef4a6150e07f108af91a61819ecbfcfac568002d": 54912, "64772567ce8d586087be0e6d60b3ac7d05ff01f11963403da76e03ac5850b48c": 54915, "16c37e46853733b22afad12b67807c2f6ade4b7f86248be4746ab6c40d793920": 54913, "8ddb7053231da3be8cb24d2974bf22d544466d473002c2c96d173dde4c02b5dd": 54917, "2cc6e0a7140f9a1e8d4f0c7993e0a59c2c6cfba29b2b9038335d0cdb5b58d122": 54914, "ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e": 66353, "46b028acff96f69f2ecbcaadac3f3f40daf364645b7d6cab78d9325a7df7c3dd": 54918, "ef831cb0e89f9cbd2590b9683eeec20110e9c80cb44ae60e4fc4d292c0516b3f": 54916}, failed_installations: [] }. New GroupMembership { members: {"c40633422d7fe018162dc3ddbdf1719640211d87fb751c7f87f316df6f32fea1": 54911, "e073369cb83392c01116a17fef4a6150e07f108af91a61819ecbfcfac568002d": 54912, "64772567ce8d586087be0e6d60b3ac7d05ff01f11963403da76e03ac5850b48c": 54915, "16c37e46853733b22afad12b67807c2f6ade4b7f86248be4746ab6c40d793920": 54913, "8ddb7053231da3be8cb24d2974bf22d544466d473002c2c96d173dde4c02b5dd": 54917, "2cc6e0a7140f9a1e8d4f0c7993e0a59c2c6cfba29b2b9038335d0cdb5b58d122": 54914, "ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e": 66353, "46b028acff96f69f2ecbcaadac3f3f40daf364645b7d6cab78d9325a7df7c3dd": 54918, "ef831cb0e89f9cbd2590b9683eeec20110e9c80cb44ae60e4fc4d292c0516b3f": 54916}, failed_installations: [] }
2025-03-10T18:27:09.251631Z DEBUG xmtp_mls::storage::encrypted_store: Transaction beginning
2025-03-10T18:27:09.251784Z DEBUG xmtp_mls::groups::intents: queued intent inbox_id="ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e" intent_kind=UpdateGroupMembership
2025-03-10T18:27:09.252600Z DEBUG xmtp_mls::storage::encrypted_store: Transaction being committed
2025-03-10T18:27:09.253533Z  INFO sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async: xmtp_mls::groups::intents: old group membership: {"64772567ce8d586087be0e6d60b3ac7d05ff01f11963403da76e03ac5850b48c": 54915, "16c37e46853733b22afad12b67807c2f6ade4b7f86248be4746ab6c40d793920": 54913, "46b028acff96f69f2ecbcaadac3f3f40daf364645b7d6cab78d9325a7df7c3dd": 54918, "ef831cb0e89f9cbd2590b9683eeec20110e9c80cb44ae60e4fc4d292c0516b3f": 54916, "2cc6e0a7140f9a1e8d4f0c7993e0a59c2c6cfba29b2b9038335d0cdb5b58d122": 54914, "c40633422d7fe018162dc3ddbdf1719640211d87fb751c7f87f316df6f32fea1": 54911, "8ddb7053231da3be8cb24d2974bf22d544466d473002c2c96d173dde4c02b5dd": 54917, "ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e": 66353, "e073369cb83392c01116a17fef4a6150e07f108af91a61819ecbfcfac568002d": 54912}
2025-03-10T18:27:09.253557Z  INFO sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async: xmtp_mls::groups::intents: updated group membership: {"64772567ce8d586087be0e6d60b3ac7d05ff01f11963403da76e03ac5850b48c": 54915, "16c37e46853733b22afad12b67807c2f6ade4b7f86248be4746ab6c40d793920": 54913, "46b028acff96f69f2ecbcaadac3f3f40daf364645b7d6cab78d9325a7df7c3dd": 54918, "ef831cb0e89f9cbd2590b9683eeec20110e9c80cb44ae60e4fc4d292c0516b3f": 54916, "c40633422d7fe018162dc3ddbdf1719640211d87fb751c7f87f316df6f32fea1": 54911, "8ddb7053231da3be8cb24d2974bf22d544466d473002c2c96d173dde4c02b5dd": 54917, "ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e": 66353, "e073369cb83392c01116a17fef4a6150e07f108af91a61819ecbfcfac568002d": 54912}
2025-03-10T18:27:09.253601Z  INFO sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async: xmtp_mls::identity_updates: Getting installation diff. Old: GroupMembership { members: {"64772567ce8d586087be0e6d60b3ac7d05ff01f11963403da76e03ac5850b48c": 54915, "16c37e46853733b22afad12b67807c2f6ade4b7f86248be4746ab6c40d793920": 54913, "46b028acff96f69f2ecbcaadac3f3f40daf364645b7d6cab78d9325a7df7c3dd": 54918, "ef831cb0e89f9cbd2590b9683eeec20110e9c80cb44ae60e4fc4d292c0516b3f": 54916, "2cc6e0a7140f9a1e8d4f0c7993e0a59c2c6cfba29b2b9038335d0cdb5b58d122": 54914, "c40633422d7fe018162dc3ddbdf1719640211d87fb751c7f87f316df6f32fea1": 54911, "8ddb7053231da3be8cb24d2974bf22d544466d473002c2c96d173dde4c02b5dd": 54917, "ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e": 66353, "e073369cb83392c01116a17fef4a6150e07f108af91a61819ecbfcfac568002d": 54912}, failed_installations: [] }. New GroupMembership { members: {"64772567ce8d586087be0e6d60b3ac7d05ff01f11963403da76e03ac5850b48c": 54915, "16c37e46853733b22afad12b67807c2f6ade4b7f86248be4746ab6c40d793920": 54913, "46b028acff96f69f2ecbcaadac3f3f40daf364645b7d6cab78d9325a7df7c3dd": 54918, "ef831cb0e89f9cbd2590b9683eeec20110e9c80cb44ae60e4fc4d292c0516b3f": 54916, "c40633422d7fe018162dc3ddbdf1719640211d87fb751c7f87f316df6f32fea1": 54911, "8ddb7053231da3be8cb24d2974bf22d544466d473002c2c96d173dde4c02b5dd": 54917, "ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e": 66353, "e073369cb83392c01116a17fef4a6150e07f108af91a61819ecbfcfac568002d": 54912}, failed_installations: [] }
2025-03-10T18:27:09.253877Z DEBUG sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async: xmtp_mls::storage::encrypted_store::association_state: Loaded association state from cache: 2cc6e0a7140f9a1e8d4f0c7993e0a59c2c6cfba29b2b9038335d0cdb5b58d122 54914
2025-03-10T18:27:09.256440Z DEBUG sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async: xmtp_mls::groups::mls_sync: [ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e] set stored intent [177] to state `published` inbox_id="ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e" installation_id=3625ecab12f5e27597c565338204c86e4c6058139b7a6bb75701220b263d84e8 intent.id=177 intent.kind=UpdateGroupMembership group_id="da14b1d682a82c6f85785b397594de74"
2025-03-10T18:27:09.256521Z DEBUG sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async:send_group_messages: xmtp_api::mls: sending [1] group messages inbox_id="ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e"
2025-03-10T18:27:09.256552Z DEBUG sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async:send_group_messages: tower::buffer::worker: service.ready=true processing request
2025-03-10T18:27:09.256591Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(7), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:09.256604Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(7) }
2025-03-10T18:27:09.256644Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(7), flags: (0x1: END_STREAM) }
2025-03-10T18:27:09.446067Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 2200 }
2025-03-10T18:27:09.446154Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:09.446166Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:09.450445Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(7), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:09.450508Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(7) }
2025-03-10T18:27:09.450528Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(7), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-10T18:27:09.450704Z  INFO sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async: xmtp_mls::groups::mls_sync: [ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e] published intent [177] of type [UpdateGroupMembership] intent.id=177 intent.kind=UpdateGroupMembership inbox_id="ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e" installation_id=3625ecab12f5e27597c565338204c86e4c6058139b7a6bb75701220b263d84e8 group_id="da14b1d682a82c6f85785b397594de74"
2025-03-10T18:27:09.450735Z  INFO sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async: xmtp_mls::groups::mls_sync: Commit sent. Stopping further publishes for this round
2025-03-10T18:27:09.451165Z DEBUG sync_until_intent_resolved:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}: xmtp_api::mls: query group messages group_id="da14b1d682a82c6f85785b397594de74" id_cursor=337988 inbox_id="ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e"
2025-03-10T18:27:09.452272Z DEBUG sync_until_intent_resolved:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}: tower::buffer::worker: service.re

 ❯ tests/groups.test.ts 8/10

 Test Files 0 passed (1)
      Tests 8 passed (10)
   Start at 15:26:47
   Duration 21.92s
2025-03-10T18:27:09.832154Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 33 }
2025-03-10T18:27:09.832200Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:09.832209Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:09.832225Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(9), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:09.832282Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(9) }
2025-03-10T18:27:09.832296Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(9), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-10T18:27:09.832692Z  INFO sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}: xmtp_mls::groups::mls_sync: Processing envelope with hash 7fbdfac61212ff787d255bf5c408b3da56f78e18d7e3deee89e1ec0dbfc2a6ad, id = 337992 inbox_id="ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e" installation_id=3625ecab12f5e27597c565338204c86e4c6058139b7a6bb75701220b263d84e8 group_id="da14b1d682a82c6f85785b397594de74" cursor=337992
2025-03-10T18:27:09.832707Z  INFO sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}: xmtp_mls::groups::mls_sync: client [ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e] is about to process own envelope [337992] for intent [177] inbox_id="ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e" installation_id=3625ecab12f5e27597c565338204c86e4c6058139b7a6bb75701220b263d84e8 group_id="da14b1d682a82c6f85785b397594de74" cursor=337992 intent_id=177 intent.kind=UpdateGroupMembership
2025-03-10T18:27:09.833699Z  INFO sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::groups::mls_sync: [ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e] Validating commit for intent 177. Message timestamp: 1741631229634815000
2025-03-10T18:27:09.833784Z  INFO sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::groups::validated_commit: Group context extensions proposal found: GroupMembership { members: {"46b028acff96f69f2ecbcaadac3f3f40daf364645b7d6cab78d9325a7df7c3dd": 54918, "16c37e46853733b22afad12b67807c2f6ade4b7f86248be4746ab6c40d793920": 54913, "ef831cb0e89f9cbd2590b9683eeec20110e9c80cb44ae60e4fc4d292c0516b3f": 54916, "e073369cb83392c01116a17fef4a6150e07f108af91a61819ecbfcfac568002d": 54912, "c40633422d7fe018162dc3ddbdf1719640211d87fb751c7f87f316df6f32fea1": 54911, "64772567ce8d586087be0e6d60b3ac7d05ff01f11963403da76e03ac5850b48c": 54915, "ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e": 66353, "8ddb7053231da3be8cb24d2974bf22d544466d473002c2c96d173dde4c02b5dd": 54917}, failed_installations: [] }
2025-03-10T18:27:09.833802Z  INFO sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::identity_updates: Getting installation diff. Old: GroupMembership { members: {"8ddb7053231da3be8cb24d2974bf22d544466d473002c2c96d173dde4c02b5dd": 54917, "c40633422d7fe018162dc3ddbdf1719640211d87fb751c7f87f316df6f32fea1": 54911, "46b028acff96f69f2ecbcaadac3f3f40daf364645b7d6cab78d9325a7df7c3dd": 54918, "e073369cb83392c01116a17fef4a6150e07f108af91a61819ecbfcfac568002d": 54912, "ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e": 66353, "64772567ce8d586087be0e6d60b3ac7d05ff01f11963403da76e03ac5850b48c": 54915, "16c37e46853733b22afad12b67807c2f6ade4b7f86248be4746ab6c40d793920": 54913, "2cc6e0a7140f9a1e8d4f0c7993e0a59c2c6cfba29b2b9038335d0cdb5b58d122": 54914, "ef831cb0e89f9cbd2590b9683eeec20110e9c80cb44ae60e4fc4d292c0516b3f": 54916}, failed_installations: [] }. New GroupMembership { members: {"46b028acff96f69f2ecbcaadac3f3f40daf364645b7d6cab78d9325a7df7c3dd": 54918, "16c37e46853733b22afad12b67807c2f6ade4b7f86248be4746ab6c40d793920": 54913, "ef831cb0e89f9cbd2590b9683eeec20110e9c80cb44ae60e4fc4d292c0516b3f": 54916, "e073369cb83392c01116a17fef4a6150e07f108af91a61819ecbfcfac568002d": 54912, "c40633422d7fe018162dc3ddbdf1719640211d87fb751c7f87f316df6f32fea1": 54911, "64772567ce8d586087be0e6d60b3ac7d05ff01f11963403da76e03ac5850b48c": 54915, "ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e": 66353, "8ddb7053231da3be8cb24d2974bf22d544466d473002c2c96d173dde4c02b5dd": 54917}, failed_installations: [] }
2025-03-10T18:27:09.834218Z DEBUG sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::storage::encrypted_store::association_state: Loaded association state from cache: 2cc6e0a7140f9a1e8d4f0c7993e0a59c2c6cfba29b2b9038335d0cdb5b58d122 54914
2025-03-10T18:27:09.834325Z DEBUG sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::storage::encrypted_store::association_state: Loaded association state from cache: ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e 66353
2025-03-10T18:27:09.834348Z DEBUG sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::storage::encrypted_store: Transaction beginning
2025-03-10T18:27:09.834443Z DEBUG sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::groups::mls_sync: [ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e]-[da14b1d682a82c6f85785b397594de74] processing own message for intent 177 / UpdateGroupMembership, message_epoch: 2 inbox_id="ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e" installation_id=3625ecab12f5e27597c565338204c86e4c6058139b7a6bb75701220b263d84e8 group_id="da14b1d682a82c6f85785b397594de74" cursor=337992 intent.id=177 intent.kind=UpdateGroupMembership
2025-03-10T18:27:09.834596Z  INFO sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::groups::mls_sync: [ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e] merging pending commit for intent 177
2025-03-10T18:27:09.835014Z  INFO sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::groups::mls_sync: [ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e]: Storing a transcript message with 0 members added and 1 members removed and 0 metadata changes
2025-03-10T18:27:09.836801Z DEBUG sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::storage::encrypted_store: Transaction being committed
2025-03-10T18:27:09.836878Z  INFO sync_until_intent_resolved:sync_with_conn:receive: xmtp_mls::groups::mls_sync: Transaction completed successfully: process for group [da14b1d682a82c6f85785b397594de74] envelope cursor[337992]
2025-03-10T18:27:09.840710Z DEBUG send_message:load_mls_group_with_lock_async: xmtp_mls::identity_updates: Fetching identity updates for: ["c40633422d7fe018162dc3ddbdf1719640211d87fb751c7f87f316df6f32fea1", "ef831cb0e89f9cbd2590b9683eeec20110e9c80cb44ae60e4fc4d292c0516b3f", "ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e", "e073369cb83392c01116a17fef4a6150e07f108af91a61819ecbfcfac568002d", "8ddb7053231da3be8cb24d2974bf22d544466d473002c2c96d173dde4c02b5dd", "46b028acff96f69f2ecbcaadac3f3f40daf364645b7d6cab78d9325a7df7c3dd", "64772567ce8d586087be0e6d60b3ac7d05ff01f11963403da76e03ac5850b48c", "16c37e46853733b22afad12b67807c2f6ade4b7f86248be4746ab6c40d793920"]
2025-03-10T18:27:09.840810Z DEBUG send_message:load_mls_group_with_lock_async:get_identity_updates_v2{filters=[GetIdentityUpdatesV2Filter { inbox_id: "c40633422d7fe018162dc3ddbdf1719640211d87fb751c7f87f316df6f32fea1", sequence_id: Some(54911) }, GetIdentityUpdatesV2Filter { inbox_id: "ef831cb0e89f9cbd2590b9683eeec20110e9c80cb44ae60e4fc4d292c0516b3f", sequence_id: Some(54916) }, GetIdentityUpdatesV2Filter { inbox_id: "ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e", sequence_id: Some(66353) }, GetIdentityUpdatesV2Filter { inbox_id: "e073369cb83392c01116a17fef4a6150e07f108af91a61819ecbfcfac568002d", sequence_id: Some(54912) }, GetIdentityUpdatesV2Filter { inbox_id: "8ddb7053231da3be8cb24d2974bf22d544466d473002c2c96d173dde4c02b5dd", sequence_id: Some(54917) }, GetIdentityUpdatesV2Filter { inbox_id: "46b028acff96f69f2ecbcaadac3f3f40daf364645b7d6cab78d9325a7df7c3dd", sequence_id: Some(54918) }, GetIdentityUpdatesV2Filter { inbox_id: "64772567ce8d586087be0e6d60b3ac7d05ff01f11963403da76e03ac5850b48c", sequence_id: Some(54915) }, GetIdentityUpdatesV2Filter { inbox_id: "16c37e46853733b22afad12b67807c2f6ade4b7f86248be4746ab6c40d793920", sequence_id: Some(54913) }] len=8}: tower::buffer::worker: service.ready=true p
stdout | tests/groups.test.ts > ts_groups > removeMembers-8: should remove a participant from a group
[2025-03-10T18:27:09.839Z] [warn] ts_groups > removeMembers-8: should remove a participant from a group 1.175s


 ❯ tests/groups.test.ts 9/10

 Test Files 0 passed (1)
      Tests 9 passed (10)
   Start at 15:26:47
   Duration 22.02s
2025-03-10T18:27:10.229422Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 581 }
2025-03-10T18:27:10.229531Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:10.230082Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:10.230128Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(11), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:10.230459Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(11) }
2025-03-10T18:27:10.230491Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(11), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-10T18:27:10.230997Z  INFO send_message:load_mls_group_with_lock_async: xmtp_mls::identity_updates: Getting installation diff. Old: GroupMembership { members: {"16c37e46853733b22afad12b67807c2f6ade4b7f86248be4746ab6c40d793920": 54913, "46b028acff96f69f2ecbcaadac3f3f40daf364645b7d6cab78d9325a7df7c3dd": 54918, "e073369cb83392c01116a17fef4a6150e07f108af91a61819ecbfcfac568002d": 54912, "64772567ce8d586087be0e6d60b3ac7d05ff01f11963403da76e03ac5850b48c": 54915, "ef831cb0e89f9cbd2590b9683eeec20110e9c80cb44ae60e4fc4d292c0516b3f": 54916, "c40633422d7fe018162dc3ddbdf1719640211d87fb751c7f87f316df6f32fea1": 54911, "ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e": 66353, "8ddb7053231da3be8cb24d2974bf22d544466d473002c2c96d173dde4c02b5dd": 54917}, failed_installations: [] }. New GroupMembership { members: {"16c37e46853733b22afad12b67807c2f6ade4b7f86248be4746ab6c40d793920": 54913, "46b028acff96f69f2ecbcaadac3f3f40daf364645b7d6cab78d9325a7df7c3dd": 54918, "e073369cb83392c01116a17fef4a6150e07f108af91a61819ecbfcfac568002d": 54912, "64772567ce8d586087be0e6d60b3ac7d05ff01f11963403da76e03ac5850b48c": 54915, "ef831cb0e89f9cbd2590b9683eeec20110e9c80cb44ae60e4fc4d292c0516b3f": 54916, "c40633422d7fe018162dc3ddbdf1719640211d87fb751c7f87f316df6f32fea1": 54911, "ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e": 66353, "8ddb7053231da3be8cb24d2974bf22d544466d473002c2c96d173dde4c02b5dd": 54917}, failed_installations: [] }
2025-03-10T18:27:10.232018Z DEBUG send_message: xmtp_mls::storage::encrypted_store: Transaction beginning
2025-03-10T18:27:10.232131Z DEBUG send_message: xmtp_mls::groups::intents: queued intent inbox_id="ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e" intent_kind=SendMessage
2025-03-10T18:27:10.232438Z DEBUG send_message: xmtp_mls::storage::encrypted_store: Transaction being committed
2025-03-10T18:27:10.234554Z DEBUG send_message:sync_until_last_intent_resolved:sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async: xmtp_mls::groups::mls_sync: [ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e] set stored intent [178] to state `published` inbox_id="ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e" installation_id=3625ecab12f5e27597c565338204c86e4c6058139b7a6bb75701220b263d84e8 intent.id=178 intent.kind=SendMessage group_id="da14b1d682a82c6f85785b397594de74"
2025-03-10T18:27:10.234619Z DEBUG send_message:sync_until_last_intent_resolved:sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async:send_group_messages: xmtp_api::mls: sending [1] group messages inbox_id="ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e"
2025-03-10T18:27:10.234645Z DEBUG send_message:sync_until_last_intent_resolved:sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async:send_group_messages: tower::buffer::worker: service.ready=true processing request
2025-03-10T18:27:10.234678Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(13), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:10.234774Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(13) }
2025-03-10T18:27:10.234857Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(13), flags: (0x1: END_STREAM) }
2025-03-10T18:27:10.587357Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 276 }
2025-03-10T18:27:10.588042Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:10.588119Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:10.588205Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(13), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:10.588483Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(13) }
2025-03-10T18:27:10.588517Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(13), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-10T18:27:10.588975Z  INFO send_message:sync_until_last_intent_resolved:sync_until_intent_resolved:sync_with_conn:publish_intents:load_mls_group_with_lock_async: xmtp_mls::groups::mls_sync: [ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e] published intent [178] of type [SendMessage] intent.id=178 intent.kind=SendMessage inbox_id="ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e" installation_id=3625ecab12f5e27597c565338204c86e4c6058139b7a6bb75701220b263d84e8 group_id="da14b1d682a82c6f85785b397594de74"
2025-03-10T18:27:10.589839Z DEBUG send_message:sync_until_last_intent_resolved:sync_until_intent_resolved:sync_with_conn:receive:query_group_messages{id_cursor=Some(337992) group_id="da14b1d682a82c6f85785b397594de74"}: xmtp_api::mls: query group messages group_id="da14b1d682a82c6f85785b397594de74" id_cursor=337992 inbox_id="ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e"
2025-03-10T18:27:10.589917Z DEBUG send_message:sync_until_last_intent_resolved:sync_until_intent_resolved:sync_with_conn:receive:query_group_messages{id_cursor=Some(337992) group_id="da14b1d682a82c6f85785b39

 ❯ tests/groups.test.ts 9/10

 Test Files 0 passed (1)
      Tests 9 passed (10)
   Start at 15:26:47
   Duration 22.93s
2025-03-10T18:27:10.969782Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 33 }
2025-03-10T18:27:10.969899Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:10.969919Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:10.969959Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(15), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:10.970483Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(15) }
2025-03-10T18:27:10.970525Z DEBUG sync:sync_with_conn:receive:query_group_messages{id_cursor=Some(337988) group_id="da14b1d682a82c6f85785b397594de74"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(15), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-10T18:27:10.971284Z  INFO send_message:sync_until_last_intent_resolved:sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}: xmtp_mls::groups::mls_sync: Processing envelope with hash c880dca9ea86e0618718b6366aaab5f20da05f1a017b41ab09956ea566760dec, id = 337997 inbox_id="ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e" installation_id=3625ecab12f5e27597c565338204c86e4c6058139b7a6bb75701220b263d84e8 group_id="da14b1d682a82c6f85785b397594de74" cursor=337997
2025-03-10T18:27:10.971329Z  INFO send_message:sync_until_last_intent_resolved:sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}: xmtp_mls::groups::mls_sync: client [ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e] is about to process own envelope [337997] for intent [178] inbox_id="ffefef1beb9c5e12536a0f9265c6c6e6f020748c99a83aa1df64a2b94731989e" installation_id=3625ecab12f5e27597c565338204c86e4c6058139b7a6bb75701220b263d84e8 group_id="da14b1d682a82c6f85785b397594de74" cursor=337997 intent_id=178 intent.kind=SendMessage
2025-03-10T18:27:10.972728Z DEBUG send_message:sync_until_last_intent_resolved:sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xmtp_mls::storage::encrypted_store: Transaction beginning
2025-03-10T18:27:10.972860Z DEBUG send_message:sync_until_last_intent_resolved:sync_until_intent_resolved:sync_with_conn:receive:process_message{allow_epoch_increment=true}:load_mls_group_with_lock_async: xm
stdout | tests/groups.test.ts > ts_groups > sendGroupMessage-8: should measure sending a gm in a group of 8 participants
[2025-03-10T18:27:10.975Z] [info] GM Message sent in group gm-bh15ot09bim

stdout | tests/groups.test.ts > ts_groups > sendGroupMessage-8: should measure sending a gm in a group of 8 participants
[2025-03-10T18:27:10.975Z] [warn] ts_groups > sendGroupMessage-8: should measure sending a gm in a group of 8 participants 1.135s

stdout | tests/groups.test.ts > ts_groups
[2025-03-10T18:27:10.976Z] [info] The tests indicated that the test ts_groups was success
[2025-03-10T18:27:10.976Z] [info] Successfully reported success to Datadog


 ❯ tests/groups.test.ts 10/10

 Test Files 0 passed (1)
      Tests 10 passed (10)
   Start at 15:26:47
   Duration 23.23s
2025-03-10T18:27:11.698790Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Reset { stream_id: StreamId(7), error_code: CANCEL }
2025-03-10T18:27:11.698834Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Reset { stream_id: StreamId(23), error_code: CANCEL }
2025-03-10T18:27:11.698979Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Reset { stream_id: StreamId(7), error_code: CANCEL }
 ✓ tests/groups.test.ts (10 tests) 23220ms
   ✓ ts_groups > createGroup-4: should create a large group of 4 participants 4 1698ms
   ✓ ts_groups > syncGroup-4: should sync a large group of 4 participants 4 738ms
   ✓ ts_groups > updateGroupName-4: should update the group name 991ms
   ✓ ts_groups > removeMembers-4: should remove a participant from a group 1368ms
   ✓ ts_groups > sendGroupMessage-4: should measure sending a gm in a group of 4 participants 710ms
   ✓ ts_groups > createGroup-8: should create a large group of 8 participants 8 2138ms
   ✓ ts_groups > syncGroup-8: should sync a large group of 8 participants 8 604ms
   ✓ ts_groups > updateGroupName-8: should update the group name 7686ms
   ✓ ts_groups > removeMembers-8: should remove a participant from a group 1176ms
   ✓ ts_groups > sendGroupMessage-8: should measure sending a gm in a group of 8 participants 1136ms

 Test Files 1 passed (1)
      Tests 10 passed (10)
   Start at 15:26:47
   Duration 23.94s
2025-03-10T18:27:11.704704Z DEBUG tower::buffer::worker: buffer closing; waking pending tasks
2025-03-10T18:27:11.704723Z DEBUG tower::buffer::worker: buffer closing; waking pending tasks
2025-03-10T18:27:11.704718Z DEBUG tower::buffer::worker: buffer closing; waking pending tasks
2025-03-10T18:27:11.704767Z DEBUG tower::buffer::worker: buffer closing; waking pending tasks
⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯ Unhandled Errors ⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯

Vitest caught 8 unhandled errors during the test run.
This might cause false positive tests. Resolve unhandled errors to make sure your tests are not affected.

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯ Uncaught Exception ⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯
Error: endpoint: subscribe_group_messages, source: status: Unknown, message: "h2 protocol error: error reading a body from connection", details: [], metadata: MetadataMap { headers: {} }
⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯
Serialized Error: { code: 'GenericFailure' }
This error originated in "tests/groups.test.ts" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.
The latest test that might've caused the error is "updateGroupName-8: should update the group name". It might mean one of the following:
- The error was thrown, while Vitest was running this test.
- If the error occurred after the test had been completed, this was the last documented test before it was thrown.

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯ Uncaught Exception ⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯
Error: endpoint: subscribe_group_messages, source: status: Unknown, message: "h2 protocol error: error reading a body from connection", details: [], metadata: MetadataMap { headers: {} }
⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯
Serialized Error: { code: 'GenericFailure' }
This error originated in "tests/groups.test.ts" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.
The latest test that might've caused the error is "updateGroupName-8: should update the group name". It might mean one of the following:
- The error was thrown, while Vitest was running this test.
- If the error occurred after the test had been completed, this was the last documented test before it was thrown.

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯ Uncaught Exception ⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯
Error: endpoint: subscribe_group_messages, source: status: Unknown, message: "h2 protocol error: error reading a body from connection", details: [], metadata: MetadataMap { headers: {} }
⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯
Serialized Error: { code: 'GenericFailure' }
This error originated in "tests/groups.test.ts" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.
The latest test that might've caused the error is "updateGroupName-8: should update the group name". It might mean one of the following:
- The error was thrown, while Vitest was running this test.
- If the error occurred after the test had been completed, this was the last documented test before it was thrown.

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯ Uncaught Exception ⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯
Error: endpoint: subscribe_group_messages, source: status: Unknown, message: "h2 protocol error: error reading a body from connection", details: [], metadata: MetadataMap { headers: {} }
⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯
Serialized Error: { code: 'GenericFailure' }
This error originated in "tests/groups.test.ts" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.
The latest test that might've caused the error is "updateGroupName-8: should update the group name". It might mean one of the following:
- The error was thrown, while Vitest was running this test.
- If the error occurred after the test had been completed, this was the last documented test before it was thrown.

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯ Uncaught Exception ⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯
Error: endpoint: subscribe_group_messages, source: status: Unknown, message: "h2 protocol error: error reading a body from connection", details: [], metadata: MetadataMap { headers: {} }
⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯
Serialized Error: { code: 'GenericFailure' }
This error originated in "tests/groups.test.ts" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.
The latest test that might've caused the error is "updateGroupName-8: should update the group name". It might mean one of the following:
- The error was thrown, while Vitest was running this test.
- If the error occurred after the test had been completed, this was the last documented test before it was thrown.

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯ Uncaught Exception ⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯
Error: endpoint: subscribe_group_messages, source: status: Unknown, message: "h2 protocol error: error reading a body from connection", details: [], metadata: MetadataMap { headers: {} }
⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯
Serialized Error: { code: 'GenericFailure' }
This error originated in "tests/groups.test.ts" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.
The latest test that might've caused the error is "updateGroupName-8: should update the group name". It might mean one of the following:
- The error was thrown, while Vitest was running this test.
- If the error occurred after the test had been completed, this was the last documented test before it was thrown.

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯ Uncaught Exception ⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯
Error: endpoint: subscribe_group_messages, source: status: Unknown, message: "h2 protocol error: error reading a body from connection", details: [], metadata: MetadataMap { headers: {} }
⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯
Serialized Error: { code: 'GenericFailure' }
This error originated in "tests/groups.test.ts" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.
The latest test that might've caused the error is "updateGroupName-8: should update the group name". It might mean one of the following:
- The error was thrown, while Vitest was running this test.
- If the error occurred after the test had been completed, this was the last documented test before it was thrown.

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯ Uncaught Exception ⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯
Error: endpoint: subscribe_group_messages, source: status: Unknown, message: "h2 protocol error: error reading a body from connection", details: [], metadata: MetadataMap { headers: {} }
⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯
Serialized Error: { code: 'GenericFailure' }
This error originated in "tests/groups.test.ts" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.
The latest test that might've caused the error is "updateGroupName-8: should update the group name". It might mean one of the following:
- The error was thrown, while Vitest was running this test.
- If the error occurred after the test had been completed, this was the last documented test before it was thrown.
⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯


 Test Files  1 passed (1)
      Tests  10 passed (10)
     Errors  8 errors
   Start at  15:26:47
   Duration  24.00s (transform 63ms, setup 0ms, collect 648ms, tests 23.22s, environment 0ms, prepare 34ms)

fabrizioguespe@fabrizios-MacBook-Pro qa-testing % 



2025-03-10T18:27:25.508899Z DEBUG h2::proto::settings: received settings ACK; applying Settings { flags: (0x0), enable_push: 0, initial_window_size: 2097152, max_frame_size: 16384, max_header_list_size: 16384 }
2025-03-10T18:27:25.508902Z DEBUG h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 51 }

 ❯ tests/groups.test.ts 0/10

 Test Files 0 passed (1)
      Tests 0 passed (10)
   Start at 15:27:23
   Duration 1.91s
2025-03-10T18:27:25.520289Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}: hyper_util::client::legacy::connect::http: connecting to 3.132.13.169:443
2025-03-10T18:27:25.520592Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}: hyper_util::client::legacy::connect::http: connected to 3.132.13.169:443
2025-03-10T18:27:25.565988Z DEBUG h2::codec::framed_read: received frame=Settings { flags: (0x1: ACK) }
2025-03-10T18:27:25.566010Z DEBUG h2::proto::settings: received settings ACK; applying Settings { flags: (0x0), enable_push: 0, initial_window_size: 2097152, max_frame_size: 16384, max_header_list_size: 16384 }
2025-03-10T18:27:25.566014Z DEBUG h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 51 }
2025-03-10T18:27:25.566018Z DEBUG h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:25.566020Z DEBUG h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:25.566030Z DEBUG h2::codec::framed_read: received frame=Headers { stream_id: StreamId(1), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:25.566039Z DEBUG h2::codec::framed_read: received frame=Data { stream_id: StreamId(1) }
2025-03-10T18:27:25.566046Z DEBUG h2::codec::framed_read: received frame=Headers { stream_id: StreamId(1), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-10T18:27:25.566210Z DEBUG h2::codec::framed_write: send frame=GoAway { error_code: NO_ERROR, last_stream_id: StreamId(0) }
2025-03-10T18:27:25.566214Z DEBUG h2::proto::connection: Connection::poll; connection error error=GoAway(b"", NO_ERROR, Library)
2025-03-10T18:27:25.607774Z DEBUG Connection{peer=Client}: h2::codec::framed_read: received frame=Settings { flags: (0x1: ACK) }
2025-03-10T18:27:25.607797Z DEBUG Connection{peer=Client}: h2::proto::settings: received settings ACK; applying Settings { flags: (0x0), enable_push: 0, initial_window_size: 2097152, max_frame_size: 16384, max_header_list_size: 16384 }
2025-03-10T18:27:25.607802Z DEBUG Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 51 }
2025-03-10T18:27:25.607806Z DEBUG Connection{peer=Client}: h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:25.607809Z DEBUG Connection{peer=Client}: h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:25.607884Z DEBUG Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(1), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:25.607898Z DEBUG Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(1) }
2025-03-10T18:27:25.607906Z DEBUG Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(1), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-10T18:27:25.608036Z DEBUG Connection{peer=Client}: h2::codec::framed_write: send frame=GoAway { error_code: NO_ERROR, last_stream_id: StreamId(0) }
2025-03-10T18:27:25.608044Z DEBUG Connection{peer=Client}: h2::proto::connection: Connection::poll; connection error error=GoAway(b"", NO_ERROR, Library)
2025-03-10T18:27:25.650137Z DEBUG Connection{peer=Client}: h2::codec::framed_read: received frame=Settings { flags: (0x1: ACK) }
2025-03-10T18:27:25.650160Z DEBUG Connection{peer=Client}: h2::proto::settings: received settings ACK; applying Settings { flags: (0x0), enable_push: 0, initial_window_size: 2097152, max_frame_size: 16384, max_header_list_size: 16384 }
2025-03-10T18:27:25.656475Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}: hyper_util::client::legacy::connect::http: connecting to 3.136.169.76:443
2025-03-10T18:27:25.656760Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}: hyper_util::client::legacy::connect::http: connected to 3.136.169.76:443
2025-03-10T18:27:25.657203Z DEBUG Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 51 }
2025-03-10T18:27:25.657212Z DEBUG Connection{peer=Client}: h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:25.657215Z DEBUG Connection{peer=Client}: h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:25.657224Z DEBUG Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(1), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:25.657232Z DEBUG Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(1) }
2025-03-10T18:27:25.657238Z DEBUG Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(1), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-10T18:27:25.657325Z DEBUG Connection{peer=Client}: h2::codec::framed_write: send frame=GoAway { error_code: NO_ERROR, last_stream_id: StreamId(0) }
2025-03-10T18:27:25.657333Z DEBUG Connection{peer=Client}: h2::proto::connection: Connection::poll; connection error error=GoAway(b"", NO_ERROR, Library)
2025-03-10T18:27:25.712696Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}: hyper_util::client::legacy::connect::http: connecting to 3.136.169.76:443
2025-03-10T18:27:25.712958Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}: hyper_util::client::legacy::connect::http: connected to 3.136.169.76:443
2025-03-10T18:27:25.769017Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}: hyper_util::client::legacy::connect::http: connecting to 3.136.169.76:443
2025-03-10T18:27:25.769335Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}: hyper_util::client::legacy::connect::http: connected to 3.136.169.76:443
2025-03-10T18:27:25.822763Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}: hyper_util::client::legacy::connect::http: connecting to 3.136.169.76:443
2025-03-10T18:27:25.823089Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}: hyper_util::client::legacy::connect::http: connected to 3.136.169.76:443
2025-03-10T18:27:25.926357Z DEBUG Connection{peer=Client}: h2::codec::framed_read: received frame=Settings { flags: (0x1: ACK) }
2025-03-10T18:27:25.926377Z DEBUG Connection{peer=Client}: h2::proto::settings: received settings ACK; applying Settings { flags: (0x0), enable_push: 0, initial_window_size: 2097152, max_frame_size: 16384, max_header_list_size: 16384 }
2025-03-10T18:27:25.926389Z DEBUG Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 51 }
2025-03-10T18:27:25.926399Z DEBUG Connection{peer=Client}: h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:25.926403Z DEBUG Connection{peer=Client}: h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:25.926417Z DEBUG Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(1), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:25.926426Z DEBUG Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(1) }
2025-03-10T18:27:25.926434Z DEBUG Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(1), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-10T18:27:25.926571Z DEBUG Connection{peer=Client}: h2::codec::framed_write: send frame=GoAway { error_code: NO_ERROR, last_stream_id: StreamId(0) }
2025-03-10T18:27:25.926579Z DEBUG Connection{peer=Client}: h2::proto::connection: Connection::poll; connection error error=GoAway(b"", NO_ERROR, Library)
2025-03-10T18:27:26.068364Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}: h2::client: binding client connection
2025-03-10T18:27:26.068407Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}: h2::client: client connection bound
2025-03-10T18:27:26.068411Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}: h2::codec::framed_write: send frame=Settings { flags: (0x0), enable_push: 0, initial_window_size: 2097152, max_frame_size: 16384, max_header_list_size: 16384 }
2025-03-10T18:27:26.068455Z  INFO new:new_database: xmtp_mls::storage::encrypted_store: Setting up DB connection pool
2025-03-10T18:27:26.068488Z DEBUG new:new_database: xmtp_mls::storage::encrypted_store::sqlcipher_connection: db @ [/Users/fabrizioguespe/DevRel/qa-testing/.data/ivy/ivy-a-0x467e7428C97A818d40b2A85DB965DeCAE212E0D1-44-6bd613d-dev] exists? [true]
2025-03-10T18:27:26.068501Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=WindowUpdate { stream_id: StreamId(0), size_increment: 2147418112 }
2025-03-10T18:27:26.068717Z DEBUG new:new_database: xmtp_mls::storage::encrypted_store::sqlcipher_connection: salt and database exist, db=[/Users/fabrizioguespe/DevRel/qa-testing/.data/ivy/ivy-a-0x467e7428C97A818d40b2A85DB965DeCAE212E0D1-44-6bd613d-dev], salt=[/Users/fabrizioguespe/DevRel/qa-testing/.data/ivy/ivy-a-0x467e7428C97A818d40b2A85DB965DeCAE212E0D1-44-6bd613d-dev.sqlcipher_salt] salt=/Users/fabrizioguespe/DevRel/qa-testing/.data/ivy/ivy-a-0x467e7428C97A818d40b2A85DB965DeCAE212E0D1-44-6bd613d-dev.sqlcipher_salt db=/Users/fabrizioguespe/DevRel/qa-testing/.data/ivy/ivy-a-0x467e7428C97A818d40b2A85DB965DeCAE212E0D1-44-6bd613d-dev
2025-03-10T18:27:26.071924Z  INFO new:new_database:init_db: xmtp_mls::storage::encrypted_store::sqlcipher_connection: Sqlite cipher_version=Some("4.5.7 community"), cipher_provider_version="OpenSSL 3.4.0 22 Oct 2024"
2025-03-10T18:27:26.071943Z DEBUG new:new_database:init_db: xmtp_mls::storage::encrypted_store::sqlcipher_connection: SQLCipher Database validated.
2025-03-10T18:27:26.072723Z  INFO new:new_database:init_db: xmtp_mls::storage::encrypted_store::private: Running DB migrations
2025-03-10T18:27:26.072802Z  INFO new:new_database:init_db: xmtp_mls::storage::encrypted_store::private: sqlite_version=3.45.3
2025-03-10T18:27:26.072806Z  INFO new:new_database:init_db: xmtp_mls::storage::encrypted_store::private: Migrations successful
2025-03-10T18:27:26.072838Z  INFO xmtp_mls::identity: Initializing identity
2025-03-10T18:27:26.073244Z DEBUG xmtp_mls::identity: identity in store: Some(Identity { inbox_id: "e9b1d78deea304aadd60c640367e416f9a342b33f39096b70dc653042856c103", installation_keys: XmtpInstallationCredential(SigningKey { verifying_key: VerifyingKey(CompressedEdwardsY: [252, 198, 231, 27, 163, 234, 31, 176, 120, 59, 124, 69, 161, 35, 97, 217, 89, 255, 75, 205, 105, 28, 105, 121, 254, 23, 188, 17, 77, 53, 226, 42]), EdwardsPoint{
        X: FieldElement51([1872636663707795, 326532356814159, 2156273593467128, 1828419983294239, 2215302865312349]),
        Y: FieldElement51([2044381764931338, 110063150481178, 715487652782742, 649341513092896, 2070242595559333]),
        Z: FieldElement51([960029727273901, 430511928751748, 1447496373326959, 964353675520730, 717826365039923]),
        T: FieldElement51([236330595375877, 218828128291594, 2018477221281643, 886292765458079, 1293875260885385])
}), .. }), credential: Credential { credential_type: Basic, serialized_credential_content: VLBytes { 0x0a4065396231643738646565613330346161646436306336343033363765343136663961333432623333663339303936623730646336353330343238353663313033 } }, signature_request: None, is_ready: true })
2025-03-10T18:27:26.073286Z DEBUG xmtp_mls::identity: Found existing identity in store installation_id="fcc6e71ba3ea1fb0783b7c45a12361d959ff4bcd691c6979fe17bc114d35e22a" inbox_id="e9b1d78deea304aadd60c640367e416f9a342b33f39096b70dc653042856c103"
2025-03-10T18:27:26.073292Z DEBUG xmtp_mls::builder: Initialized identity inbox_id="e9b1d78deea304aadd60c640367e416f9a342b33f39096b70dc653042856c103" installation_id="fcc6e71ba3ea1fb0783b7c45a12361d959ff4bcd691c6979fe17bc114d35e22a"
2025-03-10T18:27:26.073295Z DEBUG xmtp_mls::identity_updates: Fetching identity updates for: ["e9b1d78deea304aadd60c640367e416f9a342b33f39096b70dc653042856c103"]
2025-03-10T18:27:26.073380Z DEBUG get_identity_updates_v2{filters=[GetIdentityUpdatesV2Filter { inbox_id: "e9b1d78deea304aadd60c640367e416f9a342b33f39096b70dc653042856c103", sequence_id: Some(66358) }] len=1}: tower::buffer::worker: service.ready=true processing request
2025-03-10T18:27:26.073413Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(1), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:26.073424Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(1) }
2025-03-10T18:27:26.073427Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(1), flags: (0x1: END_STREAM) }
2025-03-10T18:27:26.085006Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}: hyper_util::client::legacy::connect::http: connecting to 3.136.169.76:443
2025-03-10T18:27:26.085261Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}: hyper_util::client::legacy::connect::http: connected to 3.136.169.76:443
2025-03-10T18:27:26.189378Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}: h2::client: binding client connection
2025-03-10T18:27:26.189425Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}: h2::client: client connection bound
2025-03-10T18:27:26.189429Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}: h2::codec::framed_write: send frame=Settings { flags: (0x0), enable_push: 0, initial_window_size: 2097152, max_frame_size: 16384, max_header_list_size: 16384 }
2025-03-10T18:27:26.189455Z  INFO new:new_database: xmtp_mls::storage::encrypted_store: Setting up DB connection pool
2025-03-10T18:27:26.189460Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=WindowUpdate { stream_id: StreamId(0), size_increment: 2147418112 }
2025-03-10T18:27:26.189501Z DEBUG new:new_database: xmtp_mls::storage::encrypted_store::sqlcipher_connection: db @ [/Users/fabrizioguespe/DevRel/qa-testing/.data/randomguy/randomguy-a-0x363F411bA3E31612ec76c61a16a9140Bd4547c3E-44-6bd613d-dev] exists? [false]
2025-03-10T18:27:26.189713Z DEBUG new:new_database: xmtp_mls::storage::encrypted_store::sqlcipher_connection: migrating sqlcipher db=[/Users/fabrizioguespe/DevRel/qa-testing/.data/randomguy/randomguy-a-0x363F411bA3E31612ec76c61a16a9140Bd4547c3E-44-6bd613d-dev] to plaintext header with salt=[/Users/fabrizioguespe/DevRel/qa-testing/.data/randomguy/randomguy-a-0x363F411bA3E31612ec76c61a16a9140Bd4547c3E-44-6bd613d-dev.sqlcipher_salt]
2025-03-10T18:27:26.189935Z DEBUG new:new_database: xmtp_mls::storage::encrypted_store::sqlcipher_connection: writing salt to file salt="aaca447bdbf0b1a8532d76033b6e6e3d" file=/Users/fabrizioguespe/DevRel/qa-testing/.data/randomguy/randomguy-a-0x363F411bA3E31612ec76c61a16a9140Bd4547c3E-44-6bd613d-dev.sqlcipher_salt
2025-03-10T18:27:26.192306Z  INFO new:new_database:init_db: xmtp_mls::storage::encrypted_store::sqlcipher_connection: Sqlite cipher_version=Some("4.5.7 community"), cipher_provider_version="OpenSSL 3.4.0 22 Oct 2024"
2025-03-10 15:27:26.192: sqlcipher_set_log: set log to stderr
2025-03-10T18:27:26.192334Z DEBUG new:new_database:init_db: xmtp_mls::storage::encrypted_store::sqlcipher_connection: SQLCipher Database validated.
2025-03-10T18:27:26.192951Z  INFO new:new_database:init_db: xmtp_mls::storage::encrypted_store::private: Running DB migrations
2025-03-10T18:27:26.202988Z  INFO new:new_database:init_db: xmtp_mls::storage::encrypted_store::private: sqlite_version=3.45.3
2025-03-10T18:27:26.203004Z  INFO new:new_database:init_db: xmtp_mls::storage::encrypted_store::private: Migrations successful
2025-03-10T18:27:26.203032Z  INFO xmtp_mls::identity: Initializing identity
2025-03-10T18:27:26.203308Z DEBUG xmtp_mls::identity: identity in store: None
2025-03-10T18:27:26.203317Z  INFO get_inbox_ids{account_addresses=["0x363f411ba3e31612ec76c61a16a9140bd4547c3e"] len=1}: xmtp_api::identity: Getting inbox_ids for account addresses: ["0x363f411ba3e31612ec76c61a16a9140bd4547c3e"]
2025-03-10T18:27:26.203337Z DEBUG get_inbox_ids{account_addresses=["0x363f411ba3e31612ec76c61a16a9140bd4547c3e"] len=1}: tower::buffer::worker: service.ready=true processing request
2025-03-10T18:27:26.203389Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(1), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:26.203403Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(1) }
2025-03-10T18:27:26.203405Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(1), flags: (0x1: END_STREAM) }
2025-03-10T18:27:26.248124Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}: h2::client: binding client connection
2025-03-10T18:27:26.248178Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}: h2::client: client connection bound
2025-03-10T18:27:26.248182Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}: h2::codec::framed_write: send frame=Settings { flags: (0x0), enable_push: 0, initial_window_size: 2097152, max_frame_size: 16384, max_header_list_size: 16384 }
2025-03-10T18:27:26.248208Z  INFO new:new_database: xmtp_mls::storage::encrypted_store: Setting up DB connection pool
2025-03-10T18:27:26.248223Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Settings { flags: (0x0), max_frame_size: 16384 }
2025-03-10T18:27:26.248230Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Settings { flags: (0x1: ACK) }
2025-03-10T18:27:26.248234Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=WindowUpdate { stream_id: StreamId(0), size_increment: 2147418112 }
2025-03-10T18:27:26.248250Z DEBUG new:new_database: xmtp_mls::storage::encrypted_store::sqlcipher_connection: db @ [/Users/fabrizioguespe/DevRel/qa-testing/.data/larry/larry-a-0x590C6De6475011F5F62D80C2438365692ec258d6-44-6bd613d-dev] exists? [true]
2025-03-10T18:27:26.248416Z DEBUG new:new_database: xmtp_mls::storage::encrypted_store::sqlcipher_connection: salt and database exist, db=[/Users/fabrizioguespe/DevRel/qa-testing/.data/larry/larry-a-0x590C6De6475011F5F62D80C2438365692ec258d6-44-6bd613d-dev], salt=[/Users/fabrizioguespe/DevRel/qa-testing/.data/larry/larry-a-0x590C6De6475011F5F62D80C2438365692ec258d6-44-6bd613d-dev.sqlcipher_salt] salt=/Users/fabrizioguespe/DevRel/qa-testing/.data/larry/larry-a-0x590C6De6475011F5F62D80C2438365692ec258d6-44-6bd613d-dev.sqlcipher_salt db=/Users/fabrizioguespe/DevRel/qa-testing/.data/larry/larry-a-0x590C6De6475011F5F62D80C2438365692ec258d6-44-6bd613d-dev
2025-03-10T18:27:26.250338Z  INFO new:new_database:init_db: xmtp_mls::storage::encrypted_store::sqlcipher_connection: Sqlite cipher_version=Some("4.5.7 community"), cipher_provider_version="OpenSSL 3.4.0 22 Oct 2024"
2025-03-10 15:27:26.250: sqlcipher_set_log: set log to stderr
2025-03-10T18:27:26.250363Z DEBUG new:new_database:init_db: xmtp_mls::storage::encrypted_store::sqlcipher_connection: SQLCipher Database validated.
2025-03-10T18:27:26.251070Z  INFO new:new_database:init_db: xmtp_mls::storage::encrypted_store::private: Running DB migrations
2025-03-10T18:27:26.251135Z  INFO new:new_database:init_db: xmtp_mls::storage::encrypted_store::private: sqlite_version=3.45.3
2025-03-10T18:27:26.251138Z  INFO new:new_database:init_db: xmtp_mls::storage::encrypted_store::private: Migrations successful
2025-03-10T18:27:26.251163Z  INFO xmtp_mls::identity: Initializing identity
2025-03-10T18:27:26.251463Z DEBUG xmtp_mls::identity: identity in store: Some(Identity { inbox_id: "0224d1cacc320652446e688cf03f53337358a41b41f75db4cadfc39d1e8df231", installation_keys: XmtpInstallationCredential(SigningKey { verifying_key: VerifyingKey(CompressedEdwardsY: [0, 211, 133, 98, 180, 68, 55, 183, 141, 16, 225, 0, 227, 36, 69, 58, 48, 46, 183, 249, 62, 68, 8, 106, 25, 134, 194, 133, 92, 253, 214, 29]), EdwardsPoint{
        X: FieldElement51([1441403137699005, 1121163915436594, 831803952379901, 256763174294523, 1722535840346823]),
        Y: FieldElement51([1744431426541591, 35548892141295, 1002736136748320, 166372352530394, 1014709419552311]),
        Z: FieldElement51([1406725848379392, 2028983860438354, 2128420328605472, 543409045527772, 1936863438408417]),
        T: FieldElement51([423402242999481, 221489075694103, 1573973426223280, 1674148581659626, 498688723728783])
}), .. }), credential: Credential { credential_type: Basic, serialized_credential_content: VLBytes { 0x0a4030323234643163616363333230363532343436653638386366303366353333333733353861343162343166373564623463616466633339643165386466323331 } }, signature_request: None, is_ready: true })
2025-03-10T18:27:26.251492Z DEBUG xmtp_mls::identity: Found existing identity in store installation_id="00d38562b44437b78d10e100e324453a302eb7f93e44086a1986c2855cfdd61d" inbox_id="0224d1cacc320652446e688cf03f53337358a41b41f75db4cadfc39d1e8df231"
2025-03-10T18:27:26.251497Z DEBUG xmtp_mls::builder: Initialized identity inbox_id="0224d1cacc320652446e688cf03f53337358a41b41f75db4cadfc39d1e8df231" installation_id="00d38562b44437b78d10e100e324453a302eb7f93e44086a1986c2855cfdd61d"
2025-03-10T18:27:26.251499Z DEBUG xmtp_mls::identity_updates: Fetching identity updates for: ["0224d1cacc320652446e688cf03f53337358a41b41f75db4cadfc39d1e8df231"]
2025-03-10T18:27:26.251572Z DEBUG get_identity_updates_v2{filters=[GetIdentityUpdatesV2Filter { inbox_id: "0224d1cacc320652446e688cf03f53337358a41b41f75db4cadfc39d1e8df231", sequence_id: Some(66354) }] len=1}: tower::buffer::worker: service.ready=true processing request
2025-03-10T18:27:26.251618Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(1), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:26.251630Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(1) }
2025-03-10T18:27:26.251633Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(1), flags: (0x1: END_STREAM) }
2025-03-10T18:27:26.303929Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}: h2::client: binding client connection
2025-03-10T18:27:26.303979Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}: h2::client: client connection bound
2025-03-10T18:27:26.303983Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}: h2::codec::framed_write: send frame=Settings { flags: (0x0), enable_push: 0, initial_window_size: 2097152, max_frame_size: 16384, max_header_list_size: 16384 }
2025-03-10T18:27:26.304008Z  INFO new:new_database: xmtp_mls::storage::encrypted_store: Setting up DB connection pool
2025-03-10T18:27:26.304020Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=WindowUpdate { stream_id: StreamId(0), size_increment: 2147418112 }
2025-03-10T18:27:26.304051Z DEBUG new:new_database: xmtp_mls::storage::encrypted_store::sqlcipher_connection: db @ [/Users/fabrizioguespe/DevRel/qa-testing/.data/mary/mary-a-0x033Be283F43F0CF36D970eF299fB0dB9278b9b9f-44-6bd613d-dev] exists? [true]
2025-03-10T18:27:26.304228Z DEBUG new:new_database: xmtp_mls::storage::encrypted_store::sqlcipher_connection: salt and database exist, db=[/Users/fabrizioguespe/DevRel/qa-testing/.data/mary/mary-a-0x033Be283F43F0CF36D970eF299fB0dB9278b9b9f-44-6bd613d-dev], salt=[/Users/fabrizioguespe/DevRel/qa-testing/.data/mary/mary-a-0x033Be283F43F0CF36D970eF299fB0dB9278b9b9f-44-6bd613d-dev.sqlcipher_salt] salt=/Users/fabrizioguespe/DevRel/qa-testing/.data/mary/mary-a-0x033Be283F43F0CF36D970eF299fB0dB9278b9b9f-44-6bd613d-dev.sqlcipher_salt db=/Users/fabrizioguespe/DevRel/qa-testing/.data/mary/mary-a-0x033Be283F43F0CF36D970eF299fB0dB9278b9b9f-44-6bd613d-dev
2025-03-10T18:27:26.306639Z  INFO new:new_database:init_db: xmtp_mls::storage::encrypted_store::sqlcipher_connection: Sqlite cipher_version=Some("4.5.7 community"), cipher_provider_version="OpenSSL 3.4.0 22 Oct 2024"
2025-03-10 15:27:26.306: sqlcipher_set_log: set log to stderr
2025-03-10T18:27:26.306667Z DEBUG new:new_database:init_db: xmtp_mls::storage::encrypted_store::sqlcipher_connection: SQLCipher Database validated.
2025-03-10T18:27:26.307864Z  INFO new:new_database:init_db: xmtp_mls::storage::encrypted_store::private: Running DB migrations
2025-03-10T18:27:26.307932Z  INFO new:new_database:init_db: xmtp_mls::storage::encrypted_store::private: sqlite_version=3.45.3
2025-03-10T18:27:26.307935Z  INFO new:new_database:init_db: xmtp_mls::storage::encrypted_store::private: Migrations successful
2025-03-10T18:27:26.307961Z  INFO xmtp_mls::identity: Initializing identity
2025-03-10T18:27:26.308238Z DEBUG xmtp_mls::identity: identity in store: Some(Identity { inbox_id: "085821700819bd34f76e8dddd2d627cd3429a49d5d77323d6949e0aacd2307d5", installation_keys: XmtpInstallationCredential(SigningKey { verifying_key: VerifyingKey(CompressedEdwardsY: [3, 192, 4, 126, 153, 23, 82, 172, 51, 19, 221, 118, 234, 131, 137, 87, 75, 191, 99, 236, 40, 102, 30, 96, 0, 90, 236, 75, 117, 211, 177, 149]), EdwardsPoint{
        X: FieldElement51([2156707678341097, 886313005889181, 1743305757186359, 1767059802950486, 1052661698600018]),
        Y: FieldElement51([2128095164054698, 612515287420140, 135065472992630, 1263062859049222, 294416648976242]),
        Z: FieldElement51([2160615083481202, 1134681600328907, 217193440964536, 77696139727334, 1924824590366243]),
        T: FieldElement51([2098678858677228, 890600500633749, 1870085557157247, 1013839413215628, 1298604141880255])
}), .. }), credential: Credential { credential_type: Basic, serialized_credential_content: VLBytes { 0x0a4030383538323137303038313962643334663736653864646464326436323763643334323961343964356437373332336436393439653061616364323330376435 } }, signature_request: None, is_ready: true })
2025-03-10T18:27:26.308274Z DEBUG xmtp_mls::identity: Found existing identity in store installation_id="03c0047e991752ac3313dd76ea8389574bbf63ec28661e60005aec4b75d3b195" inbox_id="085821700819bd34f76e8dddd2d627cd3429a49d5d77323d6949e0aacd2307d5"
2025-03-10T18:27:26.308279Z DEBUG xmtp_mls::builder: Initialized identity inbox_id="085821700819bd34f76e8dddd2d627cd3429a49d5d77323d6949e0aacd2307d5" installation_id="03c0047e991752ac3313dd76ea8389574bbf63ec28661e60005aec4b75d3b195"
2025-03-10T18:27:26.308281Z DEBUG xmtp_mls::identity_updates: Fetching identity updates for: ["085821700819bd34f76e8dddd2d627cd3429a49d5d77323d6949e0aacd2307d5"]
2025-03-10T18:27:26.308358Z DEBUG get_identity_updates_v2{filters=[GetIdentityUpdatesV2Filter { inbox_id: "085821700819bd34f76e8dddd2d627cd3429a49d5d77323d6949e0aacd2307d5", sequence_id: Some(66352) }] len=1}: tower::buffer::worker: service.ready=true processing request
2025-03-10T18:27:26.308407Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(1), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:26.308419Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(1) }
2025-03-10T18:27:26.308422Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(1), flags: (0x1: END_STREAM) }
2025-03-10T18:27:26.313258Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Settings { flags: (0x0), max_frame_size: 16384 }
2025-03-10T18:27:26.313272Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Settings { flags: (0x1: ACK) }
2025-03-10T18:27:26.375131Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}: h2::client: binding client connection
2025-03-10T18:27:26.375177Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}: h2::client: client connection bound
2025-03-10T18:27:26.375180Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}: h2::codec::framed_write: send frame=Settings { flags: (0x0), enable_push: 0, initial_window_size: 2097152, max_frame_size: 16384, max_header_list_size: 16384 }
2025-03-10T18:27:26.375208Z  INFO new:new_database: xmtp_mls::storage::encrypted_store: Setting up DB connection pool
2025-03-10T18:27:26.375220Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Settings { flags: (0x0), max_frame_size: 16384 }
2025-03-10T18:27:26.375228Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Settings { flags: (0x1: ACK) }
2025-03-10T18:27:26.375232Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=WindowUpdate { stream_id: StreamId(0), size_increment: 2147418112 }
2025-03-10T18:27:26.375250Z DEBUG new:new_database: xmtp_mls::storage::encrypted_store::sqlcipher_connection: db @ [/Users/fabrizioguespe/DevRel/qa-testing/.data/nancy/nancy-a-0xa18f772b2f105f33C957E1B633eeC451fC7e0E36-44-6bd613d-dev] exists? [true]
2025-03-10T18:27:26.375422Z DEBUG new:new_database: xmtp_mls::storage::encrypted_store::sqlcipher_connection: salt and database exist, db=[/Users/fabrizioguespe/DevRel/qa-testing/.data/nancy/nancy-a-0xa18f772b2f105f33C957E1B633eeC451fC7e0E36-44-6bd613d-dev], salt=[/Users/fabrizioguespe/DevRel/qa-testing/.data/nancy/nancy-a-0xa18f772b2f105f33C957E1B633eeC451fC7e0E36-44-6bd613d-dev.sqlcipher_salt] salt=/Users/fabrizioguespe/DevRel/qa-testing/.data/nancy/nancy-a-0xa18f772b2f105f33C957E1B633eeC451fC7e0E36-44-6bd613d-dev.sqlcipher_salt db=/Users/fabrizioguespe/DevRel/qa-testing/.data/nancy/nancy-a-0xa18f772b2f105f33C957E1B633eeC451fC7e0E36-44-6bd613d-dev
2025-03-10T18:27:26.377239Z  INFO new:new_database:init_db: xmtp_mls::storage::encrypted_store::sqlcipher_connection: Sqlite cipher_version=Some("4.5.7 community"), cipher_provider_version="OpenSSL 3.4.0 22 Oct 2024"
2025-03-10 15:27:26.377: sqlcipher_set_log: set log to stderr
2025-03-10T18:27:26.377264Z DEBUG new:new_database:init_db: xmtp_mls::storage::encrypted_store::sqlcipher_connection: SQLCipher Database validated.
2025-03-10T18:27:26.378365Z  INFO new:new_database:init_db: xmtp_mls::storage::encrypted_store::private: Running DB migrations
2025-03-10T18:27:26.378433Z  INFO new:new_database:init_db: xmtp_mls::storage::encrypted_store::private: sqlite_version=3.45.3
2025-03-10T18:27:26.378436Z  INFO new:new_database:init_db: xmtp_mls::storage::encrypted_store::private: Migrations successful
2025-03-10T18:27:26.378460Z  INFO xmtp_mls::identity: Initializing identity
2025-03-10T18:27:26.378747Z DEBUG xmtp_mls::identity: identity in store: Some(Identity { inbox_id: "5be36a8597063548f49a984e7412ec49198b2a3302ac6ca212dbf40f56d94d66", installation_keys: XmtpInstallationCredential(SigningKey { verifying_key: VerifyingKey(CompressedEdwardsY: [29, 13, 85, 168, 59, 40, 79, 67, 161, 186, 246, 37, 119, 184, 183, 155, 48, 15, 84, 105, 21, 47, 75, 156, 114, 4, 172, 169, 104, 253, 255, 132]), EdwardsPoint{
        X: FieldElement51([1141779724364899, 1215902148205518, 1779002587799756, 131422996400700, 486206977318730]),
        Y: FieldElement51([278428962264162, 69531759935082, 350387605440963, 1695276111053275, 1028132391358975]),
        Z: FieldElement51([1296130576448815, 2015676117285441, 329874393021435, 1840043312280109, 752901350215735]),
        T: FieldElement51([81952976091985, 858749152734582, 2189177197359607, 1381424144670371, 237041907508055])
}), .. }), credential: Credential { credential_type: Basic, serialized_credential_content: VLBytes { 0x0a4035626533366138353937303633353438663439613938346537343132656334393139386232613333303261633663613231326462663430663536643934643636 } }, signature_request: None, is_ready: true })
2025-03-10T18:27:26.378781Z DEBUG xmtp_mls::identity: Found existing identity in store installation_id="1d0d55a83b284f43a1baf62577b8b79b300f5469152f4b9c7204aca968fdff84" inbox_id="5be36a8597063548f49a984e7412ec49198b2a3302ac6ca212dbf40f56d94d66"
2025-03-10T18:27:26.378787Z DEBUG xmtp_mls::builder: Initialized identity inbox_id="5be36a8597063548f49a984e7412ec49198b2a3302ac6ca212dbf40f56d94d66" installation_id="1d0d55a83b284f43a1baf62577b8b79b300f5469152f4b9c7204aca968fdff84"
2025-03-10T18:27:26.378789Z DEBUG xmtp_mls::identity_updates: Fetching identity updates for: ["5be36a8597063548f49a984e7412ec49198b2a3302ac6ca212dbf40f56d94d66"]
2025-03-10T18:27:26.378866Z DEBUG get_identity_updates_v2{filters=[GetIdentityUpdatesV2Filter { inbox_id: "5be36a8597063548f49a984e7412ec49198b2a3302ac6ca212dbf40f56d94d66", sequence_id: Some(66357) }] len=1}: tower::buffer::worker: service.ready=true processing request
2025-03-10T18:27:26.378910Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(1), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:26.378923Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(1) }
2025-03-10T18:27:26.378926Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(1), flags: (0x1: END_STREAM

 ❯ tests/groups.test.ts 0/10

 Test Files 0 passed (1)
      Tests 0 passed (10)
   Start at 15:27:23
   Duration 2.92s
2025-03-10T18:27:26.559748Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Settings { flags: (0x1: ACK) }
2025-03-10T18:27:26.559772Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::proto::settings: received settings ACK; applying Settings { flags: (0x0), enable_push: 0, initial_window_size: 2097152, max_frame_size: 16384, max_header_list_size: 16384 }
2025-03-10T18:27:26.559777Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 77 }
2025-03-10T18:27:26.559781Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:26.559784Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:26.559852Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(1), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:26.559865Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(1) }
2025-03-10T18:27:26.559873Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(1), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-10T18:27:26.559992Z DEBUG xmtp_mls::groups::device_sync: starting sync worker inbox_id="5be36a8597063548f49a984e7412ec49198b2a3302ac6ca212dbf40f56d94d66" installation_id="1d0d55a83b284f43a1baf62577b8b79b300f5469152f4b9c7204aca968fdff84"
2025-03-10T18:27:26.560077Z  INFO xmtp_mls::groups::device_sync: Initializing device sync... url: Some("https://message-history.dev.ephemera.network") inbox_id="5be36a8597063548f49a984e7412ec49198b2a3302ac6ca212dbf40f56d94d66" installation_id="1d0d55a83b284f43a1baf62577b8b79b300f5469152f4b9c7204aca968fdff84"
2025-03-10T18:27:26.560273Z  INFO xmtp_mls::groups::device_sync: Device sync initialized. inbox_id="5be36a8597063548f49a984e7412ec49198b2a3302ac6ca212dbf40f56d94d66" installation_id="1d0d55a83b284f43a1baf62577b8b79b300f5469152f4b9c7204aca968fdff84"
2025-03-10T18:27:26.560982Z DEBUG sync_welcomes:query_welcome_messages{id_cursor=Some(2616748) installation_id="1d0d55a83b284f43a1baf62577b8b79b300f5469152f4b9c7204aca968fdff84"}: xmtp_api::mls: query welcomes installation_id="1d0d55a83b284f43a1baf62577b8b79b300f5469152f4b9c7204aca968fdff84" cursor=2616748 inbox_id="5be36a8597063548f49a984e7412ec49198b2a3302ac6ca212dbf40f56d94d66"
2025-03-10T18:27:26.561006Z DEBUG sync_welcomes:query_welcome_messages{id_cursor=Some(2616748) installation_id="1d0d55a83b284f43a1baf62577b8b79b300f5469152f4b9c7204aca968fdff84"}: tower::buffer::worker: service.ready=true processing request
2025-03-10T18:27:26.561039Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(3), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:26.561049Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(3) }
2025-03-10T18:27:26.561051Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(3), flags: (0x1: END_STREAM) }
2025-03-10T18:27:26.605870Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 77 }
2025-03-10T18:27:26.605897Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:26.605900Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:26.605911Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(1), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:26.605920Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(1) }
2025-03-10T18:27:26.605978Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(1), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-10T18:27:26.606093Z DEBUG xmtp_mls::groups::device_sync: starting sync worker inbox_id="0224d1cacc320652446e688cf03f53337358a41b41f75db4cadfc39d1e8df231" installation_id="00d38562b44437b78d10e100e324453a302eb7f93e44086a1986c2855cfdd61d"
2025-03-10T18:27:26.606179Z  INFO xmtp_mls::groups::device_sync: Initializing device sync... url: Some("https://message-history.dev.ephemera.network") inbox_id="0224d1cacc320652446e688cf03f53337358a41b41f75db4cadfc39d1e8df231" installation_id="00d38562b44437b78d10e100e324453a302eb7f93e44086a1986c2855cfdd61d"
2025-03-10T18:27:26.606348Z  INFO xmtp_mls::groups::device_sync: Device sync initialized. inbox_id="0224d1cacc320652446e688cf03f53337358a41b41f75db4cadfc39d1e8df231" installation_id="00d38562b44437b78d10e100e324453a302eb7f93e44086a1986c2855cfdd61d"
2025-03-10T18:27:26.606812Z DEBUG sync_welcomes:query_welcome_messages{id_cursor=Some(2616741) installation_id="00d38562b44437b78d10e100e324453a302eb7f93e44086a1986c2855cfdd61d"}: xmtp_api::mls: query welcomes installation_id="00d38562b44437b78d10e100e324453a302eb7f93e44086a1986c2855cfdd61d" cursor=2616741 inbox_id="0224d1cacc320652446e688cf03f53337358a41b41f75db4cadfc39d1e8df231"
2025-03-10T18:27:26.606830Z DEBUG sync_welcomes:query_welcome_messages{id_cursor=Some(2616741) installation_id="00d38562b44437b78d10e100e324453a302eb7f93e44086a1986c2855cfdd61d"}: tower::buffer::worker: service.ready=true processing request
2025-03-10T18:27:26.606859Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(3), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:26.606869Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(3) }
2025-03-10T18:27:26.606871Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(3), flags: (0x1: END_STREAM) }
2025-03-10T18:27:26.616574Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}: h2::client: binding client connection
2025-03-10T18:27:26.616628Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}: h2::client: client connection bound
2025-03-10T18:27:26.616640Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}: h2::codec::framed_write: send frame=Settings { flags: (0x0), enable_push: 0, initial_window_size: 2097152, max_frame_size: 16384, max_header_list_size: 16384 }
2025-03-10T18:27:26.616699Z  INFO new:new_database: xmtp_mls::storage::encrypted_store: Setting up DB connection pool
2025-03-10T18:27:26.616779Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Settings { flags: (0x0), max_frame_size: 16384 }
2025-03-10T18:27:26.616794Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Settings { flags: (0x1: ACK) }
2025-03-10T18:27:26.616797Z DEBUG new:new_database: xmtp_mls::storage::encrypted_store::sqlcipher_connection: db @ [/Users/fabrizioguespe/DevRel/qa-testing/.data/oscar/oscar-a-0x594F13ebC1B5c4e18D9A00102563Bd6A05431F2b-44-6bd613d-dev] exists? [true]
2025-03-10T18:27:26.616804Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=WindowUpdate { stream_id: StreamId(0), size_increment: 2147418112 }
2025-03-10T18:27:26.618250Z DEBUG new:new_database: xmtp_mls::storage::encrypted_store::sqlcipher_connection: salt and database exist, db=[/Users/fabrizioguespe/DevRel/qa-testing/.data/oscar/oscar-a-0x594F13ebC1B5c4e18D9A00102563Bd6A05431F2b-44-6bd613d-dev], salt=[/Users/fabrizioguespe/DevRel/qa-testing/.data/oscar/oscar-a-0x594F13ebC1B5c4e18D9A00102563Bd6A05431F2b-44-6bd613d-dev.sqlcipher_salt] salt=/Users/fabrizioguespe/DevRel/qa-testing/.data/oscar/oscar-a-0x594F13ebC1B5c4e18D9A00102563Bd6A05431F2b-44-6bd613d-dev.sqlcipher_salt db=/Users/fabrizioguespe/DevRel/qa-testing/.data/oscar/oscar-a-0x594F13ebC1B5c4e18D9A00102563Bd6A05431F2b-44-6bd613d-dev
2025-03-10T18:27:26.622787Z  INFO new:new_database:init_db: xmtp_mls::storage::encrypted_store::sqlcipher_connection: Sqlite cipher_version=Some("4.5.7 community"), cipher_provider_version="OpenSSL 3.4.0 22 Oct 2024"
2025-03-10 15:27:26.622: sqlcipher_set_log: set log to stderr
2025-03-10T18:27:26.622814Z DEBUG new:new_database:init_db: xmtp_mls::storage::encrypted_store::sqlcipher_connection: SQLCipher Database validated.
2025-03-10T18:27:26.624006Z  INFO new:new_database:init_db: xmtp_mls::storage::encrypted_store::private: Running DB migrations
2025-03-10T18:27:26.624069Z  INFO new:new_database:init_db: xmtp_mls::storage::encrypted_store::private: sqlite_version=3.45.3
2025-03-10T18:27:26.624072Z  INFO new:new_database:init_db: xmtp_mls::storage::encrypted_store::private: Migrations successful
2025-03-10T18:27:26.624097Z  INFO xmtp_mls::identity: Initializing identity
2025-03-10T18:27:26.624374Z DEBUG xmtp_mls::identity: identity in store: Some(Identity { inbox_id: "432d9d7fb87d62a804e515c5c8fea980d7c9985be933618323475fda3f2d6a1d", installation_keys: XmtpInstallationCredential(SigningKey { verifying_key: VerifyingKey(CompressedEdwardsY: [76, 177, 218, 63, 166, 49, 28, 152, 202, 74, 31, 147, 232, 119, 170, 149, 15, 175, 26, 247, 213, 233, 89, 34, 32, 240, 58, 222, 249, 181, 247, 220]), EdwardsPoint{
        X: FieldElement51([735464663239707, 773435954950734, 407101018439573, 1568441498322056, 1762095741517458]),
        Y: FieldElement51([1601537524066936, 2182577986430117, 101278668090647, 1949816915183388, 2083380278257947]),
        Z: FieldElement51([884206943042687, 1932287530225753, 1248445964146131, 2175445176470541, 2133595651960753]),
        T: FieldElement51([1850864707580265, 1311101901426486, 393441460750691, 1919506301890041, 2081226203793964])
}), .. }), credential: Credential { credential_type: Basic, serialized_credential_content: VLBytes { 0x0a4034333264396437666238376436326138303465353135633563386665613938306437633939383562653933333631383332333437356664613366326436613164 } }, signature_request: None, is_ready: true })
2025-03-10T18:27:26.624410Z DEBUG xmtp_mls::identity: Found existing identity in store installation_id="4cb1da3fa6311c98ca4a1f93e877aa950faf1af7d5e9592220f03adef9b5f7dc" inbox_id="432d9d7fb87d62a804e515c5c8fea980d7c9985be933618323475fda3f2d6a1d"
2025-03-10T18:27:26.624414Z DEBUG xmtp_mls::builder: Initialized identity inbox_id="432d9d7fb87d62a804e515c5c8fea980d7c9985be933618323475fda3f2d6a1d" installation_id="4cb1da3fa6311c98ca4a1f93e877aa950faf1af7d5e9592220f03adef9b5f7dc"
2025-03-10T18:27:26.624417Z DEBUG xmtp_mls::identity_updates: Fetching identity updates for: ["432d9d7fb87d62a804e515c5c8fea980d7c9985be933618323475fda3f2d6a1d"]
2025-03-10T18:27:26.624480Z DEBUG get_identity_updates_v2{filters=[GetIdentityUpdatesV2Filter { inbox_id: "432d9d7fb87d62a804e515c5c8fea980d7c9985be933618323475fda3f2d6a1d", sequence_id: Some(66360) }] len=1}: tower::buffer::worker: service.ready=true processing request
2025-03-10T18:27:26.624522Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(1), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:26.624534Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(1) }
2025-03-10T18:27:26.624536Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(1), flags: (0x1: END_STREAM) }
2025-03-10T18:27:26.663013Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 77 }
2025-03-10T18:27:26.663063Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:26.663071Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:26.663104Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(1), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:26.663128Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(1) }
2025-03-10T18:27:26.663153Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(1), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-10T18:27:26.663305Z DEBUG xmtp_mls::groups::device_sync: starting sync worker inbox_id="085821700819bd34f76e8dddd2d627cd3429a49d5d77323d6949e0aacd2307d5" installation_id="03c0047e991752ac3313dd76ea8389574bbf63ec28661e60005aec4b75d3b195"
2025-03-10T18:27:26.663488Z  INFO xmtp_mls::groups::device_sync: Initializing device sync... url: Some("https://message-history.dev.ephemera.network") inbox_id="085821700819bd34f76e8dddd2d627cd3429a49d5d77323d6949e0aacd2307d5" installation_id="03c0047e991752ac3313dd76ea8389574bbf63ec28661e60005aec4b75d3b195"
2025-03-10T18:27:26.663846Z  INFO xmtp_mls::groups::device_sync: Device sync initialized. inbox_id="085821700819bd34f76e8dddd2d627cd3429a49d5d77323d6949e0aacd2307d5" installation_id="03c0047e991752ac3313dd76ea8389574bbf63ec28661e60005aec4b75d3b195"
2025-03-10T18:27:26.664540Z DEBUG sync_welcomes:query_welcome_messages{id_cursor=Some(2616738) installation_id="03c0047e991752ac3313dd76ea8389574bbf63ec28661e60005aec4b75d3b195"}: xmtp_api::mls: query welcomes installation_id="03c0047e991752ac3313dd76ea8389574bbf63ec28661e60005aec4b75d3b195" cursor=2616738 inbox_id="085821700819bd34f76e8dddd2d627cd3429a49d5d77323d6949e0aacd2307d5"
2025-03-10T18:27:26.664578Z DEBUG sync_welcomes:query_welcome_messages{id_cursor=Some(2616738) installation_id="03c0047e991752ac3313dd76ea8389574bbf63ec28661e60005aec4b75d3b195"}: tower::buffer::worker: service.ready=true processing request
2025-03-10T18:27:26.664637Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(3), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:26.664661Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(3) }
2025-03-10T18:27:26.664844Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(3), flags: (0x1: END_STREAM) }
2025-03-10T18:27:26.796678Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Settings { flags: (0x1: ACK) }
2025-03-10T18:27:26.796701Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::proto::settings: received settings ACK; applying Settings { flags: (0x0), enable_push: 0, initial_window_size: 2097152, max_frame_size: 16384, max_header_list_size: 16384 }
2025-03-10T18:27:26.912603Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 50 }
2025-03-10T18:27:26.912697Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:26.912709Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:26.912742Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(3), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:26.912774Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(3) }
2025-03-10T18:27:26.912837Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(3), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-10T18:27:26.913736Z DEBUG stream_all_messages: xmtp_mls::subscriptions: stream all messages inbox_id="5be36a8597063548f49a984e7412ec49198b2a3302ac6ca212dbf40f56d94d66" installation_id=1d0d55a83b284f43a1baf62577b8b79b300f5469152f4b9c7204aca968fdff84 conversation_type=None
2025-03-10T18:27:26.913959Z DEBUG stream_all_messages:sync_welcomes:query_welcome_messages{id_cursor=Some(2616748) installation_id="1d0d55a83b284f43a1baf62577b8b79b300f5469152f4b9c7204aca968fdff84"}: xmtp_api::mls: query welcomes installation_id="1d0d55a83b284f43a1baf62577b8b79b300f5469152f4b9c7204aca968fdff84" cursor=2616748 inbox_id="5be36a8597063548f49a984e7412ec49198b2a3302ac6ca212dbf40f56d94d66"
2025-03-10T18:27:26.914014Z DEBUG stream_all_messages:sync_welcomes:query_welcome_messages{id_cursor=Some(2616748) installation_id="1d0d55a83b284f43a1baf62577b8b79b300f5469152f4b9c7204aca968fdff84"}: tower::buffer::worker: service.ready=true processing request
2025-03-10T18:27:26.914104Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(5), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:26.914271Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(5) }
2025-03-10T18:27:26.914282Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(5), flags: (0x1: END_STREAM) }
2025-03-10T18:27:26.968734Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 77 }
2025-03-10T18:27:26.969323Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:26.969350Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:26.969388Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(1), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:26.969414Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(1) }
2025-03-10T18:27:26.969568Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(1), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-10T18:27:26.969869Z DEBUG xmtp_mls::groups::device_sync: starting sync worker inbox_id="432d9d7fb87d62a804e515c5c8fea980d7c9985be933618323475fda3f2d6a1d" installation_id="4cb1da3fa6311c98ca4a1f93e877aa950faf1af7d5e9592220f03adef9b5f7dc"
2025-03-10T18:27:26.970084Z  INFO xmtp_mls::groups::device_sync: Initializing device sync... url: Some("https://message-history.dev.ephemera.network") inbox_id="432d9d7fb87d62a804e515c5c8fea980d7c9985be933618323475fda3f2d6a1d" installation_id="4cb1da3fa6311c98ca4a1f93e877aa950faf1af7d5e9592220f03adef9b5f7dc"
2025-03-10T18:27:26.970734Z  INFO xmtp_mls::groups::device_sync: Device sync initialized. inbox_id="432d9d7fb87d62a804e515c5c8fea980d7c9985be933618323475fda3f2d6a1d" installation_id="4cb1da3fa6311c98ca4a1f93e877aa950faf1af7d5e9592220f03adef9b5f7dc"
2025-03-10T18:27:26.971805Z DEBUG sync_welcomes:query_welcome_messages{id_cursor=Some(2616747) installation_id="4cb1da3fa6311c98ca4a1f93e877aa950faf1af7d5e9592220f03adef9b5f7dc"}: xmtp_api::mls: query welcomes installation_id="4cb1da3fa6311c98ca4a1f93e877aa950faf1af7d5e9592220f03adef9b5f7dc" cursor=2616747 inbox_id="432d9d7fb87d62a804e515c5c8fea980d7c9985be933618323475fda3f2d6a1d"
2025-03-10T18:27:26.971853Z DEBUG sync_welcomes:query_welcome_messages{id_cursor=Some(2616747) installation_id="4cb1da3fa6311c98ca4a1f93e877aa950faf1af7d5e9592220f03adef9b5f7dc"}: tower::buffer::worker: service.ready=true processing request
2025-03-10T18:27:26.971922Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(3), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:26.971951Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(3) }
2025-03-10T18:27:26.972616Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(3), flags: (0x1: END_STREAM) }
2025-03-10T18:27:26.997102Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 50 }
2025-03-10T18:27:26.997154Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:26.997164Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:26.997196Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(3), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:26.997224Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(3) }
2025-03-10T18:27:26.997257Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(3), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-10T18:27:26.997690Z DEBUG stream_all_messages: xmtp_mls::subscriptions: stream all messages inbox_id="0224d1cacc320652446e688cf03f53337358a41b41f75db4cadfc39d1e8df231" installation_id=00d38562b44437b78d10e100e324453a302eb7f93e44086a1986c2855cfdd61d conversation_type=None
2025-03-10T18:27:26.997811Z DEBUG stream_all_messages:sync_welcomes:query_welcome_messages{id_cursor=Some(2616741) installation_id="00d38562b44437b78d10e100e324453a302eb7f93e44086a1986c2855cfdd61d"}: xmtp_api::mls: query welcomes installation_id="00d38562b44437b78d10e100e324453a302eb7f93e44086a1986c2855cfdd61d" cursor=2616741 inbox_id="0224d1cacc320652446e688cf03f53337358a41b41f75db4cadfc39d1e8df231"
2025-03-10T18:27:26.997846Z DEBUG stream_all_messages:sync_welcomes:query_welcome_messages{id_cursor=Some(2616741) installation_id="00d38562b44437b78d10e100e324453a302eb7f93e44086a1986c2855cfdd61d"}: tower::buffer::worker: service.ready=true processing request
2025-03-10T18:27:26.997903Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(5), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:26.998062Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(5) }
2025-03-10T18:27:26.998070Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(5), flags: (0x1: END_STREAM) }
2025-03-10T18:27:27.057088Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 50 }
2025-03-10T18:27:27.057152Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:27.057167Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:27.057194Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(3), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:27.057219Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(3) }
2025-03-10T18:27:27.057262Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(3), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-10T18:27:27.057752Z DEBUG stream_all_messages: xmtp_mls::subscriptions: stream all messages inbox_id="085821700819bd34f76e8dddd2d627cd3429a49d5d77323d6949e0aacd2307d5" installation_id=03c0047e991752ac3313dd76ea8389574bbf63ec28661e60005aec4b75d3b195 conversation_type=None
2025-03-10T18:27:27.057984Z DEBUG stream_all_messages:sync_welcomes:query_welcome_messages{id_cursor=Some(2616738) installation_id="03c0047e991752ac3313dd76ea8389574bbf63ec28661e60005aec4b75d3b195"}: xmtp_api::mls: query welcomes installation_id="03c0047e991752ac3313dd76ea8389574bbf63ec28661e60005aec4b75d3b195" cursor=2616738 inbox_id="085821700819bd34f76e8dddd2d627cd3429a49d5d77323d6949e0aacd2307d5"
2025-03-10T18:27:27.058036Z DEBUG stream_all_messages:sync_welcomes:query_welcome_messages{id_cursor=Some(2616738) installation_id="03c0047e991752ac3313dd76ea8389574bbf63ec28661e60005aec4b75d3b195"}: tower::buffer::worker: service.ready=true processing request
2025-03-10T18:27:27.058123Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(5), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:27.059811Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(5) }
2025-03-10T18:27:27.059830Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(5), flags: (0x1: END_STREAM) }
2025-03-10T18:27:27.310950Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 50 }
2025-03-10T18:27:27.311303Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:27.311321Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:27.311355Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(5), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:27.311386Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(5) }
2025-03-10T18:27:27.311472Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(5), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-10T18:27:27.312514Z DEBUG stream_all_messages: xmtp_mls::subscriptions::stream_conversations: Setting up conversation stream cursor = 2616748 cursor=2616748 inbox_id="5be36a8597063548f49a984e7412ec49198b2a3302ac6ca212dbf40f56d94d66"
2025-03-10T18:27:27.312542Z DEBUG stream_all_messages: xmtp_api::mls: subscribing to welcome messages inbox_id="5be36a8597063548f49a984e7412ec49198b2a3302ac6ca212dbf40f56d94d66"
2025-03-10T18:27:27.312675Z DEBUG stream_all_messages: tower::buffer::worker: service.ready=true processing request
2025-03-10T18:27:27.312793Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(7), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:27.312835Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(7) }
2025-03-10T18:27:27.312844Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(7), flags: (0x1: END_STREAM) }
2025-03-10T18:27:27.319236Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 50 }
2025-03-10T18:27:27.319291Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:27.319301Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:27.319324Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(3), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:27.319342Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(3) }
2025-03-10T18:27:27.319622Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(3), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-10T18:27:27.321521Z DEBUG stream_all_messages: xmtp_mls::subscriptions: stream all messages inbox_id="432d9d7fb87d62a804e515c5c8fea980d7c9985be933618323475fda3f2d6a1d" installation_id=4cb1da3fa6311c98ca4a1f93e877aa950faf1af7d5e9592220f03adef9b5f7dc conversation_type=None
2025-03-10T18:27:27.321652Z DEBUG stream_all_messages:sync_welcomes:query_welcome_messages{id_cursor=Some(2616747) installation_id="4cb1da3fa6311c98ca4a1f93e877aa950faf1af7d5e9592220f03adef9b5f7dc"}: xmtp_api::mls: query welcomes installation_id="4cb1da3fa6311c98ca4a1f93e877aa950faf1af7d5e9592220f03adef9b5f7dc" cursor=2616747 inbox_id="432d9d7fb87d62a804e515c5c8fea980d7c9985be933618323475fda3f2d6a1d"
2025-03-10T18:27:27.321742Z DEBUG stream_all_messages:sync_welcomes:query_welcome_messages{id_cursor=Some(2616747) installation_id="4cb1da3fa6311c98ca4a1f93e877aa950faf1af7d5e9592220f03adef9b5f7dc"}: tower::buffer::worker: service.ready=true processing request
2025-03-10T18:27:27.321834Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(5), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:27.321862Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(5) }
2025-03-10T18:27:27.321872Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(5), flags: (0x1: END_STREAM) }
2025-03-10T18:27:27.385513Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 50 }
2025-03-10T18:27:27.385627Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:27.385646Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:27.385719Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(5), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:27.385775Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(5) }
2025-03-10T18:27:27.385918Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(5), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-10T18:27:27.387056Z DEBUG stream_all_messages: xmtp_mls::subscriptions::stream_conversations: Setting up conversation stream cursor = 2616741 cursor=2616741 inbox_id="0224d1cacc320652446e688cf03f53337358a41b41f75db4cadfc39d1e8df231"
2025-03-10T18:27:27.387091Z DEBUG stream_all_messages: xmtp_api::mls: subscribing to welcome messages inbox_id="0224d1cacc320652446e688cf03f53337358a41b41f75db4cadfc39d1e8df231"
2025-03-10T18:27:27.387178Z DEBUG stream_all_messages: tower::buffer::worker: service.ready=true processing request
2025-03-10T18:27:27.387372Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(7), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:27.387433Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(7) }
2025-03-10T18:27:27.387450Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(7), flags: (0x1: END_STREAM) }
2025-03-10T18:27:27.415820Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 50 }
2025-03-10T18:27:27.415894Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:27.415905Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:27.415936Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(5), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:27.415962Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(5) }
2025-03-10T18:27:27.416042Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(5), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-10T18:27:27.417411Z DEBUG stream_all_messages: xmtp_mls::subscriptions::stream_conversations: Setting up conversation stream cursor = 2616738 cursor=2616738 inbox_id="085821700819bd34f76e8dddd2d627cd3429a49d5d77323d6949e0aacd2307d5"
stdout | tests/groups.test.ts > ts_groups
[2025-03-10T18:27:26.560Z] [warn] [nancy-a] Create XMTP client v:6bd613d 2.232s

stdout | tests/groups.test.ts > ts_groups
[2025-03-10T18:27:26.606Z] [warn] [larry-a] Create XMTP client v:6bd613d 2.278s

stdout | tests/groups.test.ts > ts_groups
[2025-03-10T18:27:26.664Z] [warn] [mary-a] Create XMTP client v:6bd613d 2.335s

stdout | tests/groups.test.ts > ts_groups
[2025-03-10T18:27:26.914Z] [warn] [nancy-a] Start message stream 352.99ms

stdout | tests/groups.test.ts > ts_groups
[2025-03-10T18:27:26.915Z] [warn] [nancy-a] Start stream 354.633ms
[2025-03-10T18:27:26.916Z] [warn] [nancy-a] Initialize XMTP client 2.589s

stdout | tests/groups.test.ts > ts_groups
[2025-03-10T18:27:26.971Z] [warn] [oscar-a] Create XMTP client v:6bd613d 2.642s

stdout | tests/groups.test.ts > ts_groups
[2025-03-10T18:27:26.997Z] [warn] [larry-a] Start message stream 391.038ms

stdout | tests/groups.test.ts > ts_groups
[2025-03-10T18:27:26.998Z] [warn] [larry-a] Start stream 391.834ms
[2025-03-10T18:27:26.998Z] [warn] [larry-a] Initialize XMTP client 2.672s

stdout | tests/groups.test.ts > ts_groups
[2025-03-10T18:27:27.058Z] [warn] [mary-a] Start message stream 393.507ms

stdout | tests/groups.test.ts > ts_groups
[2025-03-10T18:27:27.059Z] [warn] [mary-a] Start stream 394.727ms
[2025-03-10T18:27:27.059Z] [warn] [mary-a] Initialize XMTP client 2.733s

stdout | tests/groups.test.ts > ts_groups
[2025-03-10T18:27:27.320Z] [warn] [oscar-a] Start message stream 348.688ms

stdout | tests/groups.test.ts > ts_groups
[2025-03-10T18:27:27.321Z] [warn] [oscar-a] Start stream 349.589ms
[2025-03-10T18:27:27.321Z] [warn] [oscar-a] Initialize XMTP client 2.994s


 ❯ tests/groups.test.ts 0/10

 Test Files 0 passed (1)
      Tests 0 passed (10)
   Start at 15:27:23
   Duration 3.93s
2025-03-10T18:27:27.598550Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 46 }
2025-03-10T18:27:27.598605Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:27.598619Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:27.598653Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(7), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:27.598986Z DEBUG stream_all_messages: xmtp_mls::subscriptions::stream_messages: setting up messages subscription
2025-03-10T18:27:27.599042Z DEBUG stream_all_messages:query_latest_group_message{group_id="04fbc81439a86b5a27d956119be3705d"}: xmtp_api::mls: query latest group message group_id="04fbc81439a86b5a27d956119be3705d" inbox_id="085821700819bd34f76e8dddd2d627cd3429a49d5d77323d6949e0aacd2307d5"
2025-03-10T18:27:27.600829Z DEBUG stream_all_messages:query_latest_group_message{group_id="96282119ca23100642cfc2f555ff7036"}: xmtp_api::mls: query latest group message group_id="96282119ca23100642cfc2f555ff7036" inbox_id="085821700819bd34f76e8dddd2d627cd3429a49d5d77323d6949e0aacd2307d5"
2025-03-10T18:27:27.600866Z DEBUG stream_all_messages:query_latest_group_message{group_id="8317783c5d79484e181c6160366a9a29"}: xmtp_api::mls: query latest group message group_id="8317783c5d79484e181c6160366a9a29" inbox_id="085821700819bd34f76e8dddd2d627cd3429a49d5d77323d6949e0aacd2307d5"
2025-03-10T18:27:27.600888Z DEBUG stream_all_messages:query_latest_group_message{group_id="a91cea7c5d005bc1ebf78e7699d95181"}: xmtp_api::mls: query latest group message group_id="a91cea7c5d005bc1ebf78e7699d95181" inbox_id="085821700819bd34f76e8dddd2d627cd3429a49d5d77323d6949e0aacd2307d5"
2025-03-10T18:27:27.601247Z DEBUG stream_all_messages:query_latest_group_message{group_id="04fbc81439a86b5a27d956119be3705d"}: tower::buffer::worker: service.ready=true processing request
2025-03-10T18:27:27.601271Z DEBUG stream_all_messages:query_latest_group_message{group_id="96282119ca23100642cfc2f555ff7036"}: tower::buffer::worker: service.ready=true processing request
2025-03-10T18:27:27.601277Z DEBUG stream_all_messages:query_latest_group_message{group_id="8317783c5d79484e181c6160366a9a29"}: tower::buffer::worker: service.ready=true processing request
2025-03-10T18:27:27.601283Z DEBUG stream_all_messages:query_latest_group_message{group_id="a91cea7c5d005bc1ebf78e7699d95181"}: tower::buffer::worker: service.ready=true processing request
2025-03-10T18:27:27.601397Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(9), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:27.601422Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(11), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:27.601546Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(13), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:27.601558Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(15), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:27.601569Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(9) }
2025-03-10T18:27:27.601577Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(11) }
2025-03-10T18:27:27.601582Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(13) }
2025-03-10T18:27:27.601710Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(15) }
2025-03-10T18:27:27.601718Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(9), flags: (0x1: END_STREAM) }
2025-03-10T18:27:27.601724Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(11), flags: (0x1: END_STREAM) }
2025-03-10T18:27:27.601729Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(13), flags: (0x1: END_STREAM) }
2025-03-10T18:27:27.601734Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(15), flags: (0x1: END_STREAM) }
2025-03-10T18:27:27.704923Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 46 }
2025-03-10T18:27:27.704981Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:27.704995Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:27.705029Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(7), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:27.705355Z DEBUG stream_all_messages: xmtp_mls::subscriptions::stream_messages: setting up messages subscription
2025-03-10T18:27:27.705387Z DEBUG stream_all_messages:query_latest_group_message{group_id="a91cea7c5d005bc1ebf78e7699d95181"}: xmtp_api::mls: query latest group message group_id="a91cea7c5d005bc1ebf78e7699d95181" inbox_id="5be36a8597063548f49a984e7412ec49198b2a3302ac6ca212dbf40f56d94d66"
2025-03-10T18:27:27.705428Z DEBUG stream_all_messages:query_latest_group_message{group_id="96282119ca23100642cfc2f555ff7036"}: xmtp_api::mls: query latest group message group_id="96282119ca23100642cfc2f555ff7036" inbox_id="5be36a8597063548f49a984e7412ec49198b2a3302ac6ca212dbf40f56d94d66"
2025-03-10T18:27:27.705451Z DEBUG stream_all_messages:query_latest_group_message{group_id="04fbc81439a86b5a27d956119be3705d"}: xmtp_api::mls: query latest group message group_id="04fbc81439a86b5a27d956119be3705d" inbox_id="5be36a8597063548f49a984e7412ec49198b2a3302ac6ca212dbf40f56d94d66"
2025-03-10T18:27:27.705502Z DEBUG stream_all_messages:query_latest_group_message{group_id="8317783c5d79484e181c6160366a9a29"}: xmtp_api::mls: query latest group message group_id="8317783c5d79484e181c6160366a9a29" inbox_id="5be36a8597063548f49a984e7412ec49198b2a3302ac6ca212dbf40f56d94d66"
2025-03-10T18:27:27.705527Z DEBUG stream_all_messages:query_latest_group_message{group_id="a91cea7c5d005bc1ebf78e7699d95181"}: tower::buffer::worker: service.ready=true processing request
2025-03-10T18:27:27.705561Z DEBUG stream_all_messages:query_latest_group_message{group_id="96282119ca23100642cfc2f555ff7036"}: tower::buffer::worker: service.ready=true processing request
2025-03-10T18:27:27.705655Z DEBUG stream_all_messages:query_latest_group_message{group_id="04fbc81439a86b5a27d956119be3705d"}: tower::buffer::worker: service.ready=true processing request
2025-03-10T18:27:27.705685Z DEBUG stream_all_messages:query_latest_group_message{group_id="8317783c5d79484e181c6160366a9a29"}: tower::buffer::worker: service.ready=true processing request
2025-03-10T18:27:27.705819Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(9), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:27.705856Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(11), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:27.705877Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(13), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:27.705895Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(15), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:27.705915Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(9) }
2025-03-10T18:27:27.705926Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(11) }
2025-03-10T18:27:27.705935Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(13) }
2025-03-10T18:27:27.705945Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(15) }
2025-03-10T18:27:27.705955Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(9), flags: (0x1: END_STREAM) }
2025-03-10T18:27:27.706002Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(11), flags: (0x1: END_STREAM) }
2025-03-10T18:27:27.706115Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(13), flags: (0x1: END_STREAM) }
2025-03-10T18:27:27.706127Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(15), flags: (0x1: END_STREAM) }
2025-03-10T18:27:27.719983Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 50 }
2025-03-10T18:27:27.720009Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:27.720012Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:27.720020Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(5), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:27.720028Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(5) }
2025-03-10T18:27:27.720082Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(5), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-10T18:27:27.720284Z DEBUG stream_all_messages: xmtp_mls::subscriptions::stream_conversations: Setting up conversation stream cursor = 2616747 cursor=2616747 inbox_id="432d9d7fb87d62a804e515c5c8fea980d7c9985be933618323475fda3f2d6a1d"
2025-03-10T18:27:27.720289Z DEBUG stream_all_messages: xmtp_api::mls: subscribing to welcome messages inbox_id="432d9d7fb87d62a804e515c5c8fea980d7c9985be933618323475fda3f2d6a1d"
2025-03-10T18:27:27.720304Z DEBUG stream_all_messages: tower::buffer::worker: service.ready=true processing request
2025-03-10T18:27:27.720327Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(7), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:27.720337Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(7) }
2025-03-10T18:27:27.720340Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(7), flags: (0x1: END_STREAM) }
2025-03-10T18:27:27.785152Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 46 }
2025-03-10T18:27:27.785198Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:27.785207Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:27.785254Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(7), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:27.785620Z DEBUG stream_all_messages: xmtp_mls::subscriptions::stream_messages: setting up messages subscription
2025-03-10T18:27:27.785650Z DEBUG stream_all_messages:query_latest_group_message{group_id="a91cea7c5d005bc1ebf78e7699d95181"}: xmtp_api::mls: query latest group message group_id="a91cea7c5d005bc1ebf78e7699d95181" inbox_id="0224d1cacc320652446e688cf03f53337358a41b41f75db4cadfc39d1e8df231"
2025-03-10T18:27:27.785681Z DEBUG stream_all_messages:query_latest_group_message{group_id="04fbc81439a86b5a27d956119be3705d"}: xmtp_api::mls: query latest group message group_id="04fbc81439a86b5a27d956119be3705d" inbox_id="0224d1cacc320652446e688cf03f53337358a41b41f75db4cadfc39d1e8df231"
2025-03-10T18:27:27.785692Z DEBUG stream_all_messages:query_latest_group_message{group_id="96282119ca23100642cfc2f555ff7036"}: xmtp_api::mls: query latest group message group_id="96282119ca23100642cfc2f555ff7036" inbox_id="0224d1cacc320652446e688cf03f53337358a41b41f75db4cadfc39d1e8df231"
2025-03-10T18:27:27.785729Z DEBUG stream_all_messages:query_latest_group_message{group_id="8317783c5d79484e181c6160366a9a29"}: xmtp_api::mls: query latest group message group_id="8317783c5d79484e181c6160366a9a29" inbox_id="0224d1cacc320652446e688cf03f53337358a41b41f75db4cadfc39d1e8df231"
2025-03-10T18:27:27.785743Z DEBUG stream_all_messages:query_latest_group_message{group_id="a91cea7c5d005bc1ebf78e7699d95181"}: tower::buffer::worker: service.ready=true processing request
2025-03-10T18:27:27.785781Z DEBUG stream_all_messages:query_latest_group_message{group_id="04fbc81439a86b5a27d956119be3705d"}: tower::buffer::worker: service.ready=true processing request
2025-03-10T18:27:27.785788Z DEBUG stream_all_messages:query_latest_group_message{group_id="96282119ca23100642cfc2f555ff7036"}: tower::buffer::worker: service.ready=true processing request
2025-03-10T18:27:27.785793Z DEBUG stream_all_messages:query_latest_group_message{group_id="8317783c5d79484e181c6160366a9a29"}: tower::buffer::worker: service.ready=true processing request
2025-03-10T18:27:27.785879Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(9), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:27.785898Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 29 }
2025-03-10T18:27:27.785917Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:27.785925Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:27.785933Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(9), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:27.785966Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(9) }
2025-03-10T18:27:27.785977Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(9), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-10T18:27:27.785996Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(13), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:27.786009Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(11), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:27.786020Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(13) }
2025-03-10T18:27:27.786026Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(13), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-10T18:27:27.786032Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(11) }
2025-03-10T18:27:27.786037Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(11), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-10T18:27:27.786042Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(15), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:27.786078Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(15) }
2025-03-10T18:27:27.786087Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(15), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-10T18:27:27.785903Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(11), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:27.786172Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(13), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:27.786186Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(15), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:27.786197Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(9) }
2025-03-10T18:27:27.786204Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(11) }
2025-03-10T18:27:27.786209Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(13) }
2025-03-10T18:27:27.786253Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(15) }
2025-03-10T18:27:27.786260Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(9), flags: (0x1: END_STREAM) }
2025-03-10T18:27:27.786265Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(11), flags: (0x1: END_STREAM) }
2025-03-10T18:27:27.786235Z DEBUG stream_all_messages: xmtp_mls::subscriptions::stream_messages: subscribed to group 0x04fb...705d at 336236
2025-03-10T18:27:27.786278Z DEBUG stream_all_messages: xmtp_mls::subscriptions::stream_messages: subscribed to group 0x9628...7036 at 336212
2025-03-10T18:27:27.786307Z DEBUG stream_all_messages: xmtp_mls::subscriptions::stream_messages: subscribed to group 0x8317...9a29 at 336248
2025-03-10T18:27:27.786312Z DEBUG stream_all_messages: xmtp_mls::subscriptions::stream_messages: subscribed to group 0xa91c...5181 at 336265
2025-03-10T18:27:27.786316Z DEBUG stream_all_messages: xmtp_api::mls: subscribing to group messages inbox_id="085821700819bd34f76e8dddd2d627cd3429a49d5d77323d6949e0aacd2307d5"
2025-03-10T18:27:27.786269Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(13), flags: (0x1: END_STREAM) }
2025-03-10T18:27:27.786325Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(15), flags: (0x1: END_STREAM) }
2025-03-10T18:27:27.786382Z DEBUG stream_all_messages: tower::buffer::worker: service.ready=true processing request
2025-03-10T18:27:27.786440Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(17), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:27.786454Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(17) }
2025-03-10T18:27:27.786459Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(17), flags: (0x1: END_STREAM) }
2025-03-10T18:27:27.896828Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 29 }
2025-03-10T18:27:27.896909Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:27.896920Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:27.896971Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(15), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:27.896997Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(15) }
2025-03-10T18:27:27.897034Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(15), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-10T18:27:27.897045Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(9), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:27.897067Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(9) }
2025-03-10T18:27:27.897076Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(9), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-10T18:27:27.897083Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(13), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:27.897296Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(13) }
2025-03-10T18:27:27.897304Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(13), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-10T18:27:27.897310Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(11), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:27.897319Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(11) }
2025-03-10T18:27:27.897325Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(11), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-10T18:27:27.897498Z DEBUG stream_all_messages: xmtp_mls::subscriptions::stream_messages: subscribed to group 0xa91c...5181 at 336265
2025-03-10T18:27:27.897511Z DEBUG stream_all_messages: xmtp_mls::subscriptions::stream_messages: subscribed to group 0x9628...7036 at 336212
2025-03-10T18:27:27.897515Z DEBUG stream_all_messages: xmtp_mls::subscriptions::stream_messages: subscribed to group 0x04fb...705d at 336236
2025-03-10T18:27:27.897518Z DEBUG stream_all_messages: xmtp_mls::subscriptions::stream_messages: subscribed to group 0x8317...9a29 at 336248
2025-03-10T18:27:27.897522Z DEBUG stream_all_messages: xmtp_api::mls: subscribing to group messages inbox_id="5be36a8597063548f49a984e7412ec49198b2a3302ac6ca212dbf40f56d94d66"
2025-03-10T18:27:27.897573Z DEBUG stream_all_messages: tower::buffer::worker: service.ready=true processing request
2025-03-10T18:27:27.897667Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(17), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:27.897702Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(17) }
2025-03-10T18:27:27.897710Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(17), flags: (0x1: END_STREAM) }
2025-03-10T18:27:27.971780Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 188 }
2025-03-10T18:27:27.971822Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:27.971827Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:27.971840Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(17), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:28.071721Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 188 }
2025-03-10T18:27:28.071827Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:28.071846Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:28.071906Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(17), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:28.109991Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 46 }
2025-03-10T18:27:28.110089Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:28.110108Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:28.110167Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(7), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:28.111425Z DEBUG stream_all_messages: xmtp_mls::subscriptions::stream_messages: setting up messages subscription
2025-03-10T18:27:28.111480Z DEBUG stream_all_messages:query_latest_group_message{group_id="04fbc81439a86b5a27d956119be3705d"}: xmtp_api::mls: query latest group message group_id="04fbc81439a86b5a27d956119be3705d" inbox_id="432d9d7fb87d62a804e515c5c8fea980d7c9985be933618323475fda3f2d6a1d"
2025-03-10T18:27:28.111546Z DEBUG stream_all_messages:query_latest_group_message{group_id="a91cea7c5d005bc1ebf78e7699d95181"}: xmtp_api::mls: query latest group message group_id="a91cea7c5d005bc1ebf78e7699d95181" inbox_id="432d9d7fb87d62a804e515c5c8fea980d7c9985be933618323475fda3f2d6a1d"
2025-03-10T18:27:28.111570Z DEBUG stream_all_messages:query_latest_group_message{group_id="96282119ca23100642cfc2f555ff7036"}: xmtp_api::mls: query latest group message group_id="96282119ca23100642cfc2f555ff7036" inbox_id="432d9d7fb87d62a804e515c5c8fea980d7c9985be933618323475fda3f2d6a1d"
2025-03-10T18:27:28.111593Z DEBUG stream_all_messages:query_latest_group_message{group_id="8317783c5d79484e181c6160366a9a29"}: xmtp_api::mls: query latest group message group_id="8317783c5d79484e181c6160366a9a29" inbox_id="432d9d7fb87d62a804e515c5c8fea980d7c9985be933618323475fda3f2d6a1d"
2025-03-10T18:27:28.111899Z DEBUG stream_all_messages:query_latest_group_message{group_id="04fbc81439a86b5a27d956119be3705d"}: tower::buffer::worker: service.ready=true processing request
2025-03-10T18:27:28.111937Z DEBUG stream_all_messages:query_latest_group_message{group_id="a91cea7c5d005bc1ebf78e7699d95181"}: tower::buffer::worker: service.ready=true processing request
2025-03-10T18:27:28.111945Z DEBUG stream_all_messages:query_latest_group_message{group_id="96282119ca23100642cfc2f555ff7036"}: tower::buffer::worker: service.ready=true processing request
2025-03-10T18:27:28.111952Z DEBUG stream_all_messages:query_latest_group_message{group_id="8317783c5d79484e181c6160366a9a29"}: tower::buffer::worker: service.ready=true processing request
2025-03-10T18:27:28.112093Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(9), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:28.112264Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(11), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:28.112277Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(13), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:28.112287Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(15), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:28.112300Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(9) }
2025-03-10T18:27:28.112537Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(11) }
2025-03-10T18:27:28.112545Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(13) }
2025-03-10T18:27:28.112550Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(15) }
2025-03-10T18:27:28.112555Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(9), flags: (0x1: END_STREAM) }
2025-03-10T18:27:28.112561Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(11), flags: (0x1: END_STREAM) }
2025-03-10T18:27:28.112567Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(13), flags: (0x1: END_STREAM) }
2025-03-10T18:27:28.112702Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(15), flags: (0x1: END_STREAM) }
2025-03-10T18:27:28.186346Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 29 }
2025-03-10T18:27:28.186414Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:28.186430Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:28.186481Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(11), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:28.186519Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(11) }
2025-03-10T18:27:28.186540Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(11), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-10T18:27:28.186557Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(13), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:28.186580Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(13) }
2025-03-10T18:27:28.186598Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(13), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-10T18:27:28.186966Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(9), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:28.186991Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(9) }
2025-03-10T18:27:28.187006Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(9), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-10T18:27:28.187045Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(15), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:28.187060Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(15) }
2025-03-10T18:27:28.187072Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(15), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-10T18:27:28.187317Z DEBUG stream_all_messages: xmtp_mls::subscriptions::stream_messages: subscribed to group 0xa91c...5181 at 336265
2025-03-10T18:27:28.187338Z DEBUG stream_all_messages: xmtp_mls::subscriptions::stream_messages: subscribed to group 0x04fb...705d at 336236
2025-03-10T18:27:28.187348Z DEBUG stream_all_messages: xmtp_mls::subscriptions::stream_messages: subscribed to group 0x9628...7036 at 336212
2025-03-10T18:27:28.187356Z DEBUG stream_all_messages: xmtp_mls::subscriptions::stream_messages: subscribed to group 0x8317...9a29 at 336248
2025-03-10T18:27:28.187370Z DEBUG stream_all_messages: xmtp_api::mls: subscribing to group messages inbox_id="0224d1cacc320652446e688cf03f53337358a41b41f75db4cadfc39d1e8df231"
2025-03-10T18:27:28.187417Z DEBUG stream_all_messages: tower::buffer::worker: service.ready=true processing request
2025-03-10T18:27:28.187501Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(17), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:28.187540Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(17) }
2025-03-10T18:27:28.187553Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(17), flags: (0x1: END_STREAM) }
2025-03-10T18:27:28.298861Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 29 }
2025-03-10T18:27:28.298958Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:28.298976Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:28.299050Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(15), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:28.299087Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(15) }
2025-03-10T18:27:28.299649Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(15), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-10T18:27:28.299742Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(9), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:28.299778Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(9) }
2025-03-10T18:27:28.299796Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(9), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-10T18:27:28.299811Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(13), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:28.299824Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(13) }
2025-03-10T18:27:28.299835Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(13), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-10T18:27:28.299849Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(11), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:28.299860Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Data { stream_id: StreamId(11) }
2025-03-10T18:27:28.300030Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(11), flags: (0x5: END_HEADERS | END_STREAM) }
2025-03-10T18:27:28.300406Z DEBUG stream_all_messages: xmtp_mls::subscriptions::stream_messages: subscribed to group 0x04fb...705d at 336236
2025-03-10T18:27:28.300425Z DEBUG stream_all_messages: xmtp_mls::subscriptions::stream_messages: subscribed to group 0xa91c...5181 at 336265
2025-03-10T18:27:28.300434Z DEBUG stream_all_messages: xmtp_mls::subscriptions::stream_messages: subscribed to group 0x9628...7036 at 336212
2025-03-10T18:27:28.300487Z DEBUG stream_all_messages: xmtp_mls::subscriptions::stream_messages: subscribed to group 0x8317...9a29 at 336248
2025-03-10T18:27:28.300503Z DEBUG stream_all_messages: xmtp_api::mls: subscribing to group messages inbox_id="432d9d7fb87d62a804e515c5c8fea980d7c9985be933618323475fda3f2d6a1d"
2025-03-10T18:27:28.300709Z DEBUG stream_all_messages: tower::buffer::worker: service.ready=true processing request
2025-03-10T18:27:28.300812Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Headers { stream_id: StreamId(17), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:28.301003Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(17) }
2025-03-10T18:27:28.301014Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Data { stream_id: StreamId(17), flags: (0x1: END_STREAM) }
2025-03-10T18:27:28.366192Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increment: 188 }
2025-03-10T18:27:28.366334Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Ping { ack: false, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:28.366362Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_write: send frame=Ping { ack: true, payload: [2, 4, 16, 16, 9, 14, 7, 7] }
2025-03-10T18:27:28.366404Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=Headers { stream_id: StreamId(17), flags: (0x4: END_HEADERS) }
2025-03-10T18:27:28.483234Z DEBUG grpc_connect{address="https://grpc.dev.xmtp.network:443"}:Connection{peer=Client}: h2::codec::framed_read: received frame=WindowUpdate { stream_id: StreamId(0), size_increme

stdout | tests/groups.test.ts > ts_groups
[2025-03-10T18:27:30.153Z] [info] The tests indicated that the test ts_groups was success
[2025-03-10T18:27:30.153Z] [info] Successfully reported success to Datadog


 ❯ tests/groups.test.ts 1/10
 ❯ tests/groups.test.ts (10 tests | 10 skipped) 6611ms
   ↓ ts_groups > createGroup-4: should create a large group of 4 participants 4
   ↓ ts_groups > syncGroup-4: should sync a large group of 4 participants 4
   ↓ ts_groups > updateGroupName-4: should update the group name
   ↓ ts_groups > removeMembers-4: should remove a participant from a group
   ↓ ts_groups > sendGroupMessage-4: should measure sending a gm in a group of 4 participants
   ↓ ts_groups > createGroup-8: should create a large group of 8 participants 8
   ↓ ts_groups > syncGroup-8: should sync a large group of 8 participants 8
   ↓ ts_groups > updateGroupName-8: should update the group name
   ↓ ts_groups > removeMembers-8: should remove a participant from a group
   ↓ ts_groups > sendGroupMessage-8: should measure sending a gm in a group of 8 participants

 ❯ tests/groups.test.ts 11/10

 Test Files 0 passed (1)
      Tests 0 passed | 11 skipped (10)
   Start at 15:27:23

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯ Failed Suites 1 ⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯

 FAIL  tests/groups.test.ts > ts_groups
Error: API client error: endpoint: get_inbox_ids, source: status: Unknown, message: "transport error", details: [], metadata: MetadataMap { headers: {} }
⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/2]⎯

 FAIL  tests/groups.test.ts > ts_groups
TypeError: Cannot convert undefined or null to object
 ❯ closeEnv helpers/client.ts:151:32
    149|   await flushMetrics();
    150| 
    151|   for (const persona of Object.values(personas)) {
       |                                ^
    152|     await persona.worker?.terminate();
    153|   }
 ❯ tests/groups.test.ts:65:5

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[2/2]⎯


 Test Files  1 failed (1)
      Tests  10 skipped (10)
   Start at  15:27:23
   Duration  7.43s (transform 65ms, setup 0ms, collect 663ms, tests 6.61s, environment 0ms, prepare 34ms)

fabrizioguespe@fabrizios-MacBook-Pro qa-testing % 